module.exports=[921197,a=>{"use strict";var b=a.i(490610),c=a.i(739741),d=a.i(203479),e=a.i(881791),f=a.i(426779),g=a.i(351428),h=a.i(802320),i=a.i(848800);a.i(675998);var j=a.i(140833),k=a.i(101680);let l=class extends k.W3mEmailOtpWidget{constructor(){super(...arguments),this.onOtpSubmit=async a=>{try{if(this.authConnector){let d=b.ChainController.state.activeChain,j=c.ConnectionController.getConnections(d),k=g.OptionsController.state.remoteFeatures?.multiWallet,l=j.length>0;if(await this.authConnector.provider.connectOtp({otp:a}),e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),d)await c.ConnectionController.connectExternal(this.authConnector,d);else throw Error("Active chain is not set on ChainControll");if(e.EventsController.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"email",name:this.authConnector.name||"Unknown",view:h.RouterController.state.view,walletRank:void 0}}),g.OptionsController.state.remoteFeatures?.emailCapture)return;if(g.OptionsController.state.siwx)return void f.ModalController.close();if(l&&k){h.RouterController.replace("ProfileWallets"),i.SnackController.showSuccess("New Wallet Added");return}f.ModalController.close()}}catch(a){throw e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:d.CoreHelperUtil.parseError(a)}}),a}},this.onOtpResend=async a=>{this.authConnector&&(await this.authConnector.provider.connectEmail({email:a}),e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}))}}};l=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}([(0,j.customElement)("w3m-email-verify-otp-view")],l),a.s(["W3mEmailVerifyOtpView",()=>l],534414),a.i(730025);var m=a.i(637573),n=a.i(178506);a.i(53218);var o=a.i(799188),p=a.i(832557);a.i(801214),a.i(131066),a.i(66641),a.i(104497);var q=a.i(279421);let r=q.css`
  wui-icon-box {
    height: ${({spacing:a})=>a["16"]};
    width: ${({spacing:a})=>a["16"]};
  }
`;var s=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};let t=class extends m.LitElement{constructor(){super(),this.email=h.RouterController.state.data?.email,this.authConnector=p.ConnectorController.getAuthConnector(),this.loading=!1,this.listenForDeviceApproval()}render(){if(!this.email)throw Error("w3m-email-verify-device-view: No email provided");if(!this.authConnector)throw Error("w3m-email-verify-device-view: No auth connector provided");return n.html`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["6","3","6","3"]}
        gap="4"
      >
        <wui-icon-box size="xl" color="accent-primary" icon="sealCheck"></wui-icon-box>

        <wui-flex flexDirection="column" alignItems="center" gap="3">
          <wui-flex flexDirection="column" alignItems="center">
            <wui-text variant="md-regular" color="primary">
              Approve the login link we sent to
            </wui-text>
            <wui-text variant="md-regular" color="primary"><b>${this.email}</b></wui-text>
          </wui-flex>

          <wui-text variant="sm-regular" color="secondary" align="center">
            The code expires in 20 minutes
          </wui-text>

          <wui-flex alignItems="center" id="w3m-resend-section" gap="2">
            <wui-text variant="sm-regular" color="primary" align="center">
              Didn't receive it?
            </wui-text>
            <wui-link @click=${this.onResendCode.bind(this)} .disabled=${this.loading}>
              Resend email
            </wui-link>
          </wui-flex>
        </wui-flex>
      </wui-flex>
    `}async listenForDeviceApproval(){if(this.authConnector)try{await this.authConnector.provider.connectDevice(),e.EventsController.sendEvent({type:"track",event:"DEVICE_REGISTERED_FOR_EMAIL"}),e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}),h.RouterController.replace("EmailVerifyOtp",{email:this.email})}catch(a){h.RouterController.goBack()}}async onResendCode(){try{if(!this.loading){if(!this.authConnector||!this.email)throw Error("w3m-email-login-widget: Unable to resend email");this.loading=!0,await this.authConnector.provider.connectEmail({email:this.email}),this.listenForDeviceApproval(),i.SnackController.showSuccess("Code email resent")}}catch(a){i.SnackController.showError(a)}finally{this.loading=!1}}};t.styles=r,s([(0,o.state)()],t.prototype,"loading",void 0),t=s([(0,j.customElement)("w3m-email-verify-device-view")],t),a.s(["W3mEmailVerifyDeviceView",()=>t],218051);var u=m;a.i(811650);var v=a.i(652469);a.i(803675),a.i(758485);var w=a.i(896120);let x=w.css`
  wui-email-input {
    width: 100%;
  }

  form {
    width: 100%;
    display: block;
    position: relative;
  }
`;var y=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};let z=class extends u.LitElement{constructor(){super(...arguments),this.formRef=(0,v.createRef)(),this.initialEmail=h.RouterController.state.data?.email??"",this.redirectView=h.RouterController.state.data?.redirectView,this.email="",this.loading=!1}firstUpdated(){this.formRef.value?.addEventListener("keydown",a=>{"Enter"===a.key&&this.onSubmitEmail(a)})}render(){return n.html`
      <wui-flex flexDirection="column" padding="4" gap="4">
        <form ${(0,v.ref)(this.formRef)} @submit=${this.onSubmitEmail.bind(this)}>
          <wui-email-input
            value=${this.initialEmail}
            .disabled=${this.loading}
            @inputChange=${this.onEmailInputChange.bind(this)}
          >
          </wui-email-input>
          <input type="submit" hidden />
        </form>
        ${this.buttonsTemplate()}
      </wui-flex>
    `}onEmailInputChange(a){this.email=a.detail}async onSubmitEmail(a){try{if(this.loading)return;this.loading=!0,a.preventDefault();let b=p.ConnectorController.getAuthConnector();if(!b)throw Error("w3m-update-email-wallet: Auth connector not found");let c=await b.provider.updateEmail({email:this.email});e.EventsController.sendEvent({type:"track",event:"EMAIL_EDIT"}),"VERIFY_SECONDARY_OTP"===c.action?h.RouterController.push("UpdateEmailSecondaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView}):h.RouterController.push("UpdateEmailPrimaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView})}catch(a){i.SnackController.showError(a),this.loading=!1}}buttonsTemplate(){let a=!this.loading&&this.email.length>3&&this.email!==this.initialEmail;return this.redirectView?n.html`
      <wui-flex gap="3">
        <wui-button size="md" variant="neutral" fullWidth @click=${h.RouterController.goBack}>
          Cancel
        </wui-button>

        <wui-button
          size="md"
          variant="accent-primary"
          fullWidth
          @click=${this.onSubmitEmail.bind(this)}
          .disabled=${!a}
          .loading=${this.loading}
        >
          Save
        </wui-button>
      </wui-flex>
    `:n.html`
        <wui-button
          size="md"
          variant="accent-primary"
          fullWidth
          @click=${this.onSubmitEmail.bind(this)}
          .disabled=${!a}
          .loading=${this.loading}
        >
          Save
        </wui-button>
      `}};z.styles=x,y([(0,o.state)()],z.prototype,"email",void 0),y([(0,o.state)()],z.prototype,"loading",void 0),z=y([(0,j.customElement)("w3m-update-email-wallet-view")],z),a.s(["W3mUpdateEmailWalletView",()=>z],856325);var A=k;let B=class extends A.W3mEmailOtpWidget{constructor(){super(),this.email=h.RouterController.state.data?.email,this.onOtpSubmit=async a=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailPrimaryOtp({otp:a}),e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),h.RouterController.replace("UpdateEmailSecondaryOtp",h.RouterController.state.data))}catch(a){throw e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:d.CoreHelperUtil.parseError(a)}}),a}},this.onStartOver=()=>{h.RouterController.replace("UpdateEmailWallet",h.RouterController.state.data)}}};B=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}([(0,j.customElement)("w3m-update-email-primary-otp-view")],B),a.s(["W3mUpdateEmailPrimaryOtpView",()=>B],982732);var C=k;let D=class extends C.W3mEmailOtpWidget{constructor(){super(),this.email=h.RouterController.state.data?.newEmail,this.redirectView=h.RouterController.state.data?.redirectView,this.onOtpSubmit=async a=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailSecondaryOtp({otp:a}),e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),this.redirectView&&h.RouterController.reset(this.redirectView))}catch(a){throw e.EventsController.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:d.CoreHelperUtil.parseError(a)}}),a}},this.onStartOver=()=>{h.RouterController.replace("UpdateEmailWallet",h.RouterController.state.data)}}};D=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}([(0,j.customElement)("w3m-update-email-secondary-otp-view")],D),a.s(["W3mUpdateEmailSecondaryOtpView",()=>D],784551);var E=m,F=a.i(50516),G=a.i(522110),H=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};let I=class extends E.LitElement{constructor(){super(),this.authConnector=p.ConnectorController.getAuthConnector(),this.isEmailEnabled=g.OptionsController.state.remoteFeatures?.email,this.isAuthEnabled=this.checkIfAuthEnabled(p.ConnectorController.state.connectors),this.connectors=p.ConnectorController.state.connectors,p.ConnectorController.subscribeKey("connectors",a=>{this.connectors=a,this.isAuthEnabled=this.checkIfAuthEnabled(this.connectors)})}render(){if(!this.isEmailEnabled)throw Error("w3m-email-login-view: Email is not enabled");if(!this.isAuthEnabled)throw Error("w3m-email-login-view: No auth connector provided");return n.html`<wui-flex flexDirection="column" .padding=${["1","3","3","3"]} gap="4">
      <w3m-email-login-widget></w3m-email-login-widget>
    </wui-flex> `}checkIfAuthEnabled(a){let b=a.filter(a=>a.type===G.ConstantsUtil.CONNECTOR_TYPE_AUTH).map(a=>a.chain);return F.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(a=>b.includes(a))}};H([(0,o.state)()],I.prototype,"connectors",void 0),I=H([(0,j.customElement)("w3m-email-login-view")],I),a.s(["W3mEmailLoginView",()=>I],456402),a.s([],794784),a.i(794784),a.i(534414),a.i(218051),a.i(856325),a.i(982732),a.i(784551),a.i(456402),a.s(["W3mEmailLoginView",()=>I,"W3mEmailOtpWidget",()=>k.W3mEmailOtpWidget,"W3mEmailVerifyDeviceView",()=>t,"W3mEmailVerifyOtpView",()=>l,"W3mUpdateEmailPrimaryOtpView",()=>B,"W3mUpdateEmailSecondaryOtpView",()=>D,"W3mUpdateEmailWalletView",()=>z],921197)}];

//# sourceMappingURL=89298_%40reown_appkit-scaffold-ui_dist_esm_exports_email_f698a6d6.js.map