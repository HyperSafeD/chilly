(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14502,e=>{"use strict";let t;e.s([],82563),e.i(82563);var r=e.i(724293),a=e.i(578909);e.s([],571836),e.i(571836);var n=e.i(687730),i=e.i(248272),s=e.i(112753),o=e.i(695966),l=e.i(383181),c=e.i(683491),d=e.i(128025),u=e.i(640939),p=e.i(167752),m=e.i(417768),f=e.i(724381),y=e.i(30034),h=e.i(811034),w=e.i(42171),g=e.i(877652),b=e.i(552996);e.s(["arbitrum",()=>n.arbitrum,"arbitrumSepolia",()=>i.arbitrumSepolia,"base",()=>s.base,"baseSepolia",()=>o.baseSepolia,"berachain",()=>l.berachain,"berachainBepolia",()=>c.berachainBepolia,"bsc",()=>d.bsc,"celo",()=>u.celo,"gnosis",()=>p.gnosis,"hoodi",()=>m.hoodi,"katana",()=>f.katana,"mainnet",()=>y.mainnet,"optimism",()=>h.optimism,"optimismSepolia",()=>w.optimismSepolia,"polygon",()=>g.polygon,"sepolia",()=>b.sepolia],403339);var M=e.i(403339);let v=[M.base,...Object.values(M).filter(e=>e&&e.id!==M.base.id)],I=a.anvil,j=(0,r.defineChain)({...I,id:31338}),k=(0,r.defineChain)({...I,id:31339});e.s(["all",0,v,"anvil",0,I,"anvil2",0,j,"anvil3",0,k],513053),e.i(513053),e.s(["all",0,v,"anvil",0,I,"anvil2",0,j,"anvil3",0,k,"arbitrum",()=>n.arbitrum,"arbitrumSepolia",()=>i.arbitrumSepolia,"base",()=>s.base,"baseSepolia",()=>o.baseSepolia,"berachain",()=>l.berachain,"berachainBepolia",()=>c.berachainBepolia,"bsc",()=>d.bsc,"celo",()=>u.celo,"gnosis",()=>p.gnosis,"hoodi",()=>m.hoodi,"katana",()=>f.katana,"mainnet",()=>y.mainnet,"optimism",()=>h.optimism,"optimismSepolia",()=>w.optimismSepolia,"polygon",()=>g.polygon,"sepolia",()=>b.sepolia],676887);var A=e.i(676887),E=e.i(139655);e.i(823414);var D=e.i(495411),N=e.i(958046);function O(e){if(e instanceof Error&&!("code"in e))return new K({cause:e,data:e,message:e.message,stack:e.stack});let{code:t}=e;return t===K.code?new K(e):t===P.code?new P(e):t===L.code?new L(e):t===R.code?new R(e):t===_.code?new _(e):t===U.code?new U(e):t===x.code?new x(e):t===$.code?new $(e):t===S.code?new S(e):t===C.code?new C(e):t===T.code?new T(e):t===q.code?new q(e):new K({cause:e instanceof Error?e:void 0,data:e,message:e.message,stack:e instanceof Error?e.stack:void 0})}class z extends Error{constructor(e){const{cause:t,code:r,message:a,data:n,stack:i}=e;super(a,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t,this.code=r,this.data=n,this.stack=i??""}}class P extends z{constructor(e={}){super({code:P.code,data:e.data,message:e.message??"Missing or invalid parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}}Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class S extends z{constructor(e={}){super({code:S.code,data:e.data,message:e.message??"Requested resource not found."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}}Object.defineProperty(S,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class C extends z{constructor(e={}){super({code:C.code,data:e.data,message:e.message??"Requested resource not available."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class T extends z{constructor(e={}){super({code:T.code,data:e.data,message:e.message??"Transaction creation failed."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}}Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class x extends z{constructor(e={}){super({code:x.code,data:e.data,message:e.message??"Method is not implemented."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}}Object.defineProperty(x,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class _ extends z{constructor(e={}){super({code:_.code,data:e.data,message:e.message??"Rate limit exceeded."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}}Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class q extends z{constructor(e={}){super({code:q.code,data:e.data,message:e.message??"JSON-RPC version not supported."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}}Object.defineProperty(q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class R extends z{constructor(e={}){super({code:R.code,data:e.data,message:e.message??"Input is not a valid JSON-RPC request."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}}Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class U extends z{constructor(e={}){super({code:U.code,data:e.data,message:e.message??"Method does not exist."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}}Object.defineProperty(U,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class L extends z{constructor(e={}){super({code:L.code,data:e.data,message:e.message??"Invalid method parameters."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}}Object.defineProperty(L,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class K extends z{constructor(e={}){super({cause:e.cause,code:K.code,data:e.data,message:e.message??"Internal JSON-RPC error.",stack:e.stack}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalError"})}}Object.defineProperty(K,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class $ extends z{constructor(e={}){super({code:$.code,data:e.data,message:e.message??"Failed to parse JSON-RPC response."}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}}Object.defineProperty($,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Y extends Error{constructor(e,t){super(t),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=t}}class Q extends Y{constructor({message:e="The user rejected the request."}={}){super(4001,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}}Object.defineProperty(Q,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class B extends Y{constructor({message:e="The requested method and/or account has not been authorized by the user."}={}){super(4100,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}}Object.defineProperty(B,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class W extends Y{constructor({message:e="The provider does not support the requested method."}={}){super(4200,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}}Object.defineProperty(W,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class F extends Y{constructor({message:e="The provider is disconnected from all chains."}={}){super(4900,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}}Object.defineProperty(F,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class H extends Y{constructor({message:e="The provider is not connected to the requested chain."}={}){super(4901,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}}Object.defineProperty(H,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class V extends Y{constructor({message:e="An error occurred when attempting to switch chain."}={}){super(4902,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.SwitchChainError"})}}Object.defineProperty(V,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Z extends Y{constructor({message:e="This Wallet does not support a capability that was not marked as optional."}={}){super(5700,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedNonOptionalCapabilityError"})}}Object.defineProperty(Z,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class J extends Y{constructor({message:e="This Wallet does not support the requested chain ID."}={}){super(5710,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedChainIdError"})}}Object.defineProperty(J,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class G extends Y{constructor({message:e="There is already a bundle submitted with this ID."}={}){super(5720,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DuplicateIdError"})}}Object.defineProperty(G,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class X extends Y{constructor({message:e="This bundle id is unknown / has not been submitted."}={}){super(5730,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnknownBundleIdError"})}}Object.defineProperty(X,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class ee extends Y{constructor({message:e="The call bundle is too large for the Wallet to process."}={}){super(5740,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.BundleTooLargeError"})}}Object.defineProperty(ee,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class et extends Y{constructor({message:e="The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."}={}){super(5750,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicReadyWalletRejectedUpgradeError"})}}Object.defineProperty(et,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class er extends Y{constructor({message:e="The wallet does not support atomic execution but the request requires it."}={}){super(5760,e),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.AtomicityNotSupportedError"})}}function ea(e,t={}){let{includeEvents:r=!0}=t;if(!e)throw new ei;return{...r?{on:e.on?.bind(e),removeListener:e.removeListener?.bind(e)}:{},async request(t){try{let r=await e.request(t);if(r&&"object"==typeof r&&"jsonrpc"in r)return function(e,t={}){let{raw:r=!1}=t;if(r)return e;if(e.error)throw O(e.error);return e.result}(r);return r}catch(e){throw en(e)}}}}function en(e){let t=O(e);if(t instanceof K){if(!t.data)return t;let{code:e}=t.data;if(e===F.code)return new F(t);if(e===H.code)return new H(t);if(e===Q.code)return new Q(t);if(e===B.code)return new B(t);if(e===W.code)return new W(t);if(e===V.code)return new V(t);if(e===et.code)return new et(t);if(e===er.code)return new er(t);if(e===ee.code)return new ee(t);if(e===X.code)return new X(t);if(e===G.code)return new G(t);if(e===J.code)return new J(t);if(e===Z.code)return new Z(t)}return t}Object.defineProperty(er,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ei extends N.BaseError{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}}let es=function(e={}){let{prefix:t="[Porto]"}=e,r=new Set;return{error:eo(console.error,{prefix:t}),errorOnce:eo(console.error,{memo:r,prefix:t}),log:eo(console.log,{prefix:t}),logOnce:eo(console.log,{memo:r,prefix:t}),warn:eo(console.warn,{prefix:t}),warnOnce:eo(console.warn,{memo:r,prefix:t})}}();function eo(e,t={}){let{memo:r,prefix:a}=t;return(...t)=>{let n=t.join(" ");r?.has(n)||(r?.add(n),e(`${a} ${n}`))}}function el(e){if(Array.isArray(e))return e.map(el);if("function"==typeof e)return;if("object"!=typeof e||null===e)return e;if(Object.getPrototypeOf(e)!==Object.prototype)try{return structuredClone(e)}catch{return}let t={};for(let[r,a]of Object.entries(e))t[r]=el(a);return t}function ec(e,t){let r=[],a=new Set;for(let n of e){let e=t(n);a.has(e)||(a.add(e),r.push(n))}return r}function ed(){return"undefined"!=typeof globalThis&&"crypto"in globalThis?globalThis.crypto.randomUUID():crypto.randomUUID()}function eu(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(eu.cache.get(r))return eu.cache.get(r);let a=e().finally(()=>eu.cache.delete(r));return eu.cache.set(r,a),a}function ep(e){return e}function em(e,t={}){let{targetOrigin:r}=t,a=new Map;return{destroy(){for(let t of a.values())e.removeEventListener("message",t)},on(t,n,i){function s(e){e.data.topic!==t||i&&e.data.id!==i||r&&e.origin!==r||n(e.data.payload,e)}return e.addEventListener("message",s),a.set(t,s),()=>e.removeEventListener("message",s)},async send(t,a,n){let i=ed();return e.postMessage(el({id:i,payload:a,topic:t}),n??r??"*"),{id:i,payload:a,topic:t}},async sendAsync(e,t,r){let{id:a}=await this.send(e,t,r);return new Promise(t=>this.on(e,t,a))}}}function ef(e){let t,r,{from:a,to:n,waitForReady:i=!1}=e,s=!1,o=(t=()=>void 0,r=()=>void 0,{promise:new Promise((e,a)=>{t=e,r=a}),reject:r,resolve:t});a.on("ready",o.resolve);let l={destroy(){a.destroy(),n.destroy(),s&&o.reject()},on:(e,t,r)=>a.on(e,t,r),send:async(e,t)=>(s=!0,i&&await o.promise.finally(()=>s=!1),n.send(e,t)),sendAsync:async(e,t)=>(s=!0,i&&await o.promise.finally(()=>s=!1),n.sendAsync(e,t))};return{...l,ready(e){l.send("ready",e)},waitForReady:()=>o.promise}}function ey(){return{destroy(){},on:()=>()=>{},ready(){},send:()=>Promise.resolve(void 0),sendAsync:()=>Promise.resolve(void 0),waitForReady:()=>Promise.resolve(void 0)}}function eh(e){let{relayUrl:t}=e,r=null,a=new Map;async function n(e,r){let a=ed(),n=await fetch(t,{body:E.stringify({id:a,payload:r,topic:e}),headers:{"Content-Type":"application/json"},method:"POST"});return{id:a,payload:r,response:n,topic:e}}return!function e(){t&&!r&&((r=new EventSource(t)).onmessage=e=>{try{let r=JSON.parse(e.data);if(!r.topic||!r.payload)return;let n=a.get(r.topic);if(!n)return;for(let e of n)e(r.payload,{data:r,origin:t})}catch(e){console.error("Error parsing SSE message:",e)}},r.onerror=t=>{console.error("SSE connection error:",t),r?.close(),r=null,setTimeout(e,1e3)})}(),{destroy(){r?.close(),r=null,a.clear()},on:(e,t)=>(a.has(e)||a.set(e,new Set),a.get(e).add(t),()=>{let r=a.get(e);r&&(r.delete(t),0===r.size&&a.delete(e))}),async ready(e){await new Promise(e=>setTimeout(e,32)),this.send("ready",e)},async send(e,t){let{id:r}=await n(e,t);return{id:r,payload:t,topic:e}},async sendAsync(e,t){let{response:r}=await n(e,t);if(!r.ok)throw Error(`HTTP ${r.status}: ${r.statusText}`);let a=r.headers.get("content-type");if(a?.includes("application/json"))return await r.json()}}}(eu||(eu={})).cache=new Map,e.s(["bridge",()=>ef,"cliRelay",()=>eh,"from",()=>ep,"fromWindow",()=>em,"noop",()=>ey],275123);let ew={get environment(){if(!t)throw Error("React Native environment is not configured");return t},set environment(env){t=env}};function eg(){return!!("undefined"!=typeof navigator&&"ReactNative"===navigator.product||"undefined"!=typeof window&&Object.hasOwn(window,"ReactNativeWebView")||"undefined"!=typeof globalThis&&Object.hasOwn(globalThis,"HermesEngine"))}let eb={local:"http://localhost:5175/dialog/",prod:"https://id.porto.sh/dialog",stg:"https://stg.id.porto.sh/dialog"};function eM(e){return e}function ev(e={}){let{skipProtocolCheck:t,skipUnsupported:r}=e,a=e=>{let t;return!r&&(t=navigator.userAgent.toLowerCase()).includes("safari")&&!t.includes("chrome")&&e?.some(e=>["wallet_connect","eth_requestAccounts"].includes(e.method))};return"undefined"==typeof window?ek():{name:"iframe",setup(e){let r,{host:n,internal:i,theme:s,themeController:o}=e,{store:l}=i,c=eI().setup(e),d=!1,u=new URL(n),p=document.createElement("dialog");p.dataset.porto="",p.setAttribute("role","dialog"),p.setAttribute("aria-closed","true"),p.setAttribute("aria-label","Porto Wallet"),p.setAttribute("hidden","until-found"),Object.assign(p.style,{background:"transparent",border:"0",outline:"0",padding:"0",position:"fixed"}),document.body.appendChild(p);let m=document.createElement("iframe");m.setAttribute("data-testid","porto");let f=["payment",`publickey-credentials-get ${u.origin}`,`publickey-credentials-create ${u.origin}`];(!((r=navigator.userAgent.toLowerCase()).includes("firefox")||r.includes("fxios"))||r.includes("seamonkey"))&&f.push("clipboard-write"),m.setAttribute("allow",f.join("; ")),m.setAttribute("tabindex","0"),m.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"),m.setAttribute("src",eS(n)),m.setAttribute("title","Porto"),Object.assign(m.style,{backgroundColor:"transparent",border:"0",colorScheme:"light dark",height:"100%",left:"0",position:"fixed",top:"0",width:"100%"});let y=document.createElement("style");y.innerHTML=`
        dialog[data-porto]::backdrop {
          background: transparent!important;
        }
      `,p.appendChild(y),p.appendChild(m);let h=ef({from:em(window,{targetOrigin:u.origin}),to:em(m.contentWindow,{targetOrigin:u.origin}),waitForReady:!0});o?._setup(h,!0);let w=window.matchMedia("(max-width: 460px)"),g=()=>{h.send("__internal",{type:"resize",width:w.matches?460:461})};w.addEventListener("change",g),h.on("ready",t=>{let r=e.internal.store.getState().chainIds.filter(e=>t.chainIds.includes(e));0===r.length&&(r=t.chainIds),l.setState(e=>({...e,chainIds:r})),h.send("__internal",{chainIds:r,mode:"iframe",referrer:eO(),theme:s,type:"init"}),g()}),h.on("rpc-response",e=>{if(a([e._request])){let e=m.src;m.src=e}eP(l,e)}),h.on("__internal",e=>{"switch"===e.type&&"popup"===e.mode&&(c.open(),c.syncRequests(l.getState().requestQueue))});let b=null,M=null,v=()=>ez(l),I=e=>{"Escape"===e.key&&ez(l)},j=new MutationObserver(e=>{for(let t of e){if("attributes"!==t.type)continue;let e=t.attributeName;e&&"inert"===e&&p.removeAttribute(e)}});j.observe(p,{attributeOldValue:!0,attributes:!0});let k=!1,A=()=>{k&&(k=!1,p.removeEventListener("click",v),document.removeEventListener("keydown",I),p.style.pointerEvents="none",M?.focus(),M=null,Object.assign(document.body.style,b??""),document.body.style.overflow=b?.overflow??"")},E=!1,D=()=>{if(E)for(let e of(E=!1,p.setAttribute("hidden","true"),p.setAttribute("aria-closed","true"),p.close(),p.parentNode?Array.from(p.parentNode.children):[]))e!==p&&e.hasAttribute("inert")&&e.removeAttribute("inert")};return{close(){c.close(),d=!1,h.send("__internal",{mode:"iframe",referrer:eO(),type:"init"}),D(),A()},destroy(){c.close(),d=!1,A(),D(),c.destroy(),h.destroy(),p.remove(),j.disconnect(),w.removeEventListener("change",g)},open(){d||(d=!0,E||(E=!0,document.activeElement instanceof HTMLElement&&(M=document.activeElement),p.removeAttribute("hidden"),p.removeAttribute("aria-closed"),p.showModal()),k||(k=!0,p.addEventListener("click",v),document.addEventListener("keydown",I),m.focus(),p.style.pointerEvents="auto",b=Object.assign({},document.body.style),document.body.style.overflow="hidden"),h.send("__internal",{mode:"iframe",referrer:eO(),type:"init"}))},async secure(){let{trustedHosts:e}=await h.waitForReady(),r=(()=>{if(t)return!0;let e=window.location.protocol.startsWith("https");return e||es.warnOnce("Detected insecure protocol (HTTP).",`

The Porto iframe is not supported on HTTP origins (${window.location.origin})`,"due to lack of WebAuthn support.","See https://porto.sh/sdk#secure-origins-https for more information."),e})(),a="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in IntersectionObserverEntry.prototype&&"isVisible"in IntersectionObserverEntry.prototype,n=!!e?.includes(window.location.hostname),i=!!(a||n);return i||es.warnOnce(`Warning: Browser does not support IntersectionObserver v2 or host "${u.hostname}" is not trusted by Porto.
This may result in the dialog falling back to a popup.

Add "${u.hostname}" to the trusted hosts list to enable iframe dialog: https://github.com/ithacaxyz/porto/edit/main/src/trusted-hosts.ts`),{frame:i,host:n,protocol:r}},async syncRequests(e){let{methodPolicies:t}=await h.waitForReady(),r=await this.secure(),n=e?.every(e=>t?.find(t=>t.method===e.request.method)?.modes?.headless===!0),i=a(e.map(e=>e.request));if(n||!i&&r.protocol&&r.frame){let r=e.some(e=>eN(e.request,{methodPolicies:t,targetOrigin:u.origin}));!d&&r&&this.open(),h.send("rpc-requests",e)}else c.syncRequests(e)}}},supportsHeadless:!0}}function eI(e={}){if("undefined"==typeof window)return ek();let{type:t="auto",size:r=eD}=e;return{name:"popup",setup(e){let a,n,{host:i,internal:s,themeController:o}=e,{store:l}=s,c=new URL(i),d=null,u="page"===t||"auto"===t&&(window.navigator?.userAgentData?.mobile||navigator.maxTouchPoints>1||/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(navigator.userAgent.slice(0,4)))?"page":"popup";function p(){d&&ez(l)}let m=(n=setInterval(()=>{d?.closed&&ez(l)},100),()=>clearInterval(n));return o?._setup(null,!0),{close(){d&&(d.close(),d=null)},destroy(){this.close(),window.removeEventListener("focus",p),a?.destroy(),m()},open(){if("popup"===u){let e=(window.innerWidth-r.width)/2+window.screenX,t=window.screenY+100;d=window.open(eS(i),"_blank",`width=${r.width},height=${r.height},left=${e},top=${t}`)}else d=window.open(eS(i),"_blank");if(!d)throw Error("Failed to open popup");a=ef({from:em(window,{targetOrigin:c.origin}),to:em(d,{targetOrigin:c.origin}),waitForReady:!0}),o?._setup(a,!1),a.send("__internal",{mode:"page"===u?"page":"popup",referrer:eO(),theme:o?.getTheme()??e.theme,type:"init"}),a.on("rpc-response",e=>eP(l,e)),window.removeEventListener("focus",p),window.addEventListener("focus",p)},secure:async()=>({frame:!0,host:!0,protocol:!0}),async syncRequests(e){e.some(e=>eN(e.request))&&((!d||d.closed)&&this.open(),d?.focus()),a?.send("rpc-requests",e)}}},supportsHeadless:!1}}function ej(e={}){if(!eg())return ek();let{requestOptions:t={showTitle:!0}}=e;return{name:"authSession",setup(r){let{host:a,internal:n}=r,{store:i}=n,s=ew.environment;s.maybeCompleteAuthSession?.();let o=!1,l=null;async function c(r){let{request:n}=r,o={account_verifyEmail:"account_verifyEmail",eth_requestAccounts:"eth_requestAccounts",eth_sendTransaction:"eth_sendTransaction",eth_signTypedData_v4:"eth_signTypedData_v4",personal_sign:"personal_sign",wallet_addFunds:"wallet_addFunds",wallet_connect:"wallet_connect",wallet_getAccountVersion:"wallet_getAccountVersion",wallet_getAssets:"wallet_getAssets",wallet_getCallsStatus:"wallet_getCallsStatus",wallet_getCapabilities:"wallet_getCapabilities",wallet_getKeys:"wallet_getKeys",wallet_getPermissions:"wallet_getPermissions",wallet_grantAdmin:"wallet_grantAdmin",wallet_grantPermissions:"wallet_grantPermissions",wallet_prepareCalls:"wallet_prepareCalls",wallet_prepareUpgradeAccount:"wallet_prepareUpgradeAccount",wallet_revokeAdmin:"wallet_revokeAdmin",wallet_revokePermissions:"wallet_revokePermissions",wallet_sendCalls:"wallet_sendCalls",wallet_sendPreparedCalls:"wallet_sendPreparedCalls",wallet_switchEthereumChain:"wallet_switchEthereumChain",wallet_verifySignature:"wallet_verifySignature"}[n.method];if(!o)throw new W({message:`Method not supported in Mode.reactNative(): ${n.method}`});let l=s.makeRedirectUri({...e.redirectUri?{scheme:e.redirectUri.scheme}:{},path:e.redirectUri?.path??"/",preferLocalhost:"boolean"==typeof __DEV__&&__DEV__}),c=new URL(a);c.pathname=`${c.pathname.replace(/\/$/,"")}/${o}`;let d=new URLSearchParams({id:String(n.id),jsonrpc:"2.0",method:n.method,redirectUri:l}),u=n.params??[];u.length>0&&d.set("params",E.stringify(u));let p=n._decoded?.params;p&&d.set("_decoded",E.stringify(p)),c.search=d.toString();let m=await s.openAuthSessionAsync(c.toString(),l,t);eP(i,(()=>{if("success"===m.type&&m.url){let e=new URL(m.url),t=e.searchParams.get("status")??"unknown",r=e.searchParams.get("message")??void 0,a=e.searchParams.get("payload")??void 0;if("success"===t)try{return{id:n.id,jsonrpc:"2.0",result:a?E.parse(a):void 0}}catch(e){return{error:{code:-32603,message:e instanceof Error?e.message:"Failed to parse redirect payload"},id:n.id,jsonrpc:"2.0"}}let i="cancel"===t?new Q({message:r??"User rejected request"}):new Y(-32603,r??t??"Request failed");return{error:{code:i.code,message:i.message},id:n.id,jsonrpc:"2.0"}}return"cancel"===m.type||"dismiss"===m.type?{error:{code:Q.code,message:"User rejected request"},id:n.id,jsonrpc:"2.0"}:{error:{code:-32603,message:m.error??"Request failed"},id:n.id,jsonrpc:"2.0"}})()),s.dismissAuthSession?.()}return{close(){s.dismissAuthSession?.()},destroy(){s.dismissAuthSession?.()},open(){},secure:async()=>({frame:!1,host:!0,protocol:!0}),async syncRequests(e){if(o)return;let[t]=e;if(t&&l!==t.request.id){l=t.request.id,o=!0;try{await c(t)}catch(e){eP(i,{error:{code:-32603,message:e instanceof Error?e.message:"Request failed"},id:t.request.id,jsonrpc:"2.0"}),s.dismissAuthSession?.()}finally{l=null,o=!1}}}}},supportsHeadless:!1}}function ek(){return{name:"noop",setup:()=>({close(){},destroy(){},open(){},secure:async()=>({frame:!0,host:!0,protocol:!0}),async syncRequests(){}}),supportsHeadless:!0}}function eA(e){let{element:t}=e;return"undefined"==typeof window?ek():{name:"inline",setup(e){let{host:r,internal:a,theme:n,themeController:i}=e,{store:s}=a,o=!1,l=new URL(r),c=document.createElement("div");c.dataset.porto="",c.style.height="100%",t().appendChild(c);let d=document.createElement("iframe");d.setAttribute("allow",`payment; publickey-credentials-get ${l.origin}; publickey-credentials-create ${l.origin}`),d.setAttribute("aria-label","Porto Wallet"),d.setAttribute("tabindex","0"),d.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"),d.setAttribute("src",eS(r)),d.setAttribute("title","Porto"),Object.assign(d.style,{border:"0",height:"100%",width:"100%"}),c.appendChild(d);let u=ef({from:em(window,{targetOrigin:l.origin}),to:em(d.contentWindow,{targetOrigin:l.origin}),waitForReady:!0});return i?._setup(u,!0),u.on("ready",()=>{u.send("__internal",{mode:"inline-iframe",referrer:eO(),theme:n,type:"init"})}),u.on("rpc-response",e=>eP(s,e)),{close(){},destroy(){u.destroy(),c.remove()},open(){o||(o=!0,u.send("__internal",{mode:"iframe",referrer:eO(),type:"init"}))},secure:async()=>({frame:!0,host:!0,protocol:!0}),async syncRequests(e){u.send("rpc-requests",e)}}},supportsHeadless:!0}}function eE(){let e=null,t=null;return{_setup(r,a=!1){a&&(e=null),t=r},getTheme:()=>e,setTheme(r){e=r,t?.send("__internal",{theme:r,type:"set-theme"}).catch(()=>{})}}}let eD={height:282,width:360};function eN(e,t={}){let{methodPolicies:r,targetOrigin:a}=t,n=r?.find(t=>t.method===e.method);return!n||!n.modes?.headless||"object"==typeof n.modes.headless&&!!n.modes.headless.sameOrigin&&a!==window.location.origin}function eO(){let e,t;return{icon:(e=document.querySelector('link[rel="icon"][media="(prefers-color-scheme: dark)"]')?.href,t=document.querySelector('link[rel="icon"][media="(prefers-color-scheme: light)"]')?.href??document.querySelector('link[rel="icon"]')?.href,e&&t&&e!==t?{dark:e,light:t}:window.matchMedia("(prefers-color-scheme: dark)").matches?e:t),title:document.title}}function ez(e){e.setState(e=>({...e,requestQueue:e.requestQueue.map(e=>({account:e.account,error:new Q,request:e.request,status:"error"}))}))}function eP(e,t){e.setState(e=>({...e,requestQueue:e.requestQueue.map(e=>e.request.id!==t.id?e:t.error?{account:e.account,error:t.error,request:e.request,status:"error"}:{account:e.account,request:e.request,result:t.result,status:"success"})}))}function eS(e){let t=new URL(e),r=new URLSearchParams(window.location.search),a="porto.";for(let[e,n]of r.entries())e.startsWith(a)&&t.searchParams.set(e.slice(a.length),n);return t.toString()}e.s(["authSession",()=>ej,"createThemeController",()=>eE,"defaultSize",0,eD,"experimental_inline",()=>eA,"from",()=>eM,"getDialogUrl",()=>eS,"getReferrer",()=>eO,"handleBlur",()=>ez,"handleResponse",()=>eP,"hostUrls",0,eb,"iframe",()=>ev,"noop",()=>ek,"popup",()=>eI,"requiresConfirmation",()=>eN],64760);var eC=e.i(64760),eT=e.i(187966),ex=e.i(764674),e_=e.i(375024),eq=e.i(312425),eR=e.i(592978);e.i(371566);var eU=e.i(420843),eL=e.i(897379),eK=e.i(270791),e$=e.i(741188),eY=e.i(306997),eQ=N,eB=e.i(965723),eW=e.i(637066);function eF(e){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function eH(e){return eB.keccak256(function(e){let{domain:t={},message:r,primaryType:a}=e,n={EIP712Domain:eF(t),...e.types};!function(e){let{domain:t,message:r,primaryType:a,types:n}=e,i=(e,t)=>{for(let r of e){let{name:e,type:a}=r,s=t[e],o=a.match(eW.integerRegex);if(o&&("number"==typeof s||"bigint"==typeof s)){let[,e,t]=o;e_.fromNumber(s,{signed:"int"===e,size:Number.parseInt(t??"",10)/8})}if("address"===a&&"string"==typeof s&&!ex.validate(s))throw new ex.InvalidAddressError({address:s,cause:new ex.InvalidInputError});let l=a.match(eW.bytesRegex);if(l){let[,e]=l;if(e&&e_.size(s)!==Number.parseInt(e,10))throw new eZ({expectedSize:Number.parseInt(e,10),givenSize:e_.size(s)})}let c=n[a];c&&(function(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new eX({type:e})}(a),i(c,s))}};if(n.EIP712Domain&&t){if("object"!=typeof t)throw new eJ({domain:t});i(n.EIP712Domain,t)}if("EIP712Domain"!==a)if(n[a])i(n[a],r);else throw new eG({primaryType:a,types:n})}({domain:t,message:r,primaryType:a,types:n});let i=["0x19","0x01"];return t&&i.push(function(e){let{domain:t,types:r}=e;return eV({data:t,primaryType:"EIP712Domain",types:{...r,EIP712Domain:r?.EIP712Domain||eF(t)}})}({domain:t,types:n})),"EIP712Domain"!==a&&i.push(eV({data:r,primaryType:a,types:n})),e_.concat(...i)}(e))}function eV(e){let{data:t,primaryType:r,types:a}=e,n=function e(t){let{data:r,primaryType:a,types:n}=t,i=[{type:"bytes32"}],s=[function(e){let{primaryType:t,types:r}=e,a=e_.fromString(function(e){let{primaryType:t,types:r}=e,a="",n=function e(t,r=new Set){let{primaryType:a,types:n}=t,i=a.match(/^\w*/u),s=i?.[0];if(r.has(s)||void 0===n[s])return r;for(let t of(r.add(s),n[s]))e({primaryType:t.type,types:n},r);return r}({primaryType:t,types:r});for(let e of(n.delete(t),[t,...Array.from(n).sort()]))a+=`${e}(${(r[e]??[]).map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return a}({primaryType:t,types:r}));return eB.keccak256(a)}({primaryType:a,types:n})];for(let t of n[a]??[]){let[a,o]=function t(r){let{types:a,name:n,type:i,value:s}=r;if(void 0!==a[i])return[{type:"bytes32"},eB.keccak256(e({data:s,primaryType:i,types:a}))];if("bytes"===i){let e=s.length%2?"0":"";return s=`0x${e+s.slice(2)}`,[{type:"bytes32"},eB.keccak256(s,{as:"Hex"})]}if("string"===i)return[{type:"bytes32"},eB.keccak256(eY.fromString(s),{as:"Hex"})];if(i.lastIndexOf("]")===i.length-1){let e=i.slice(0,i.lastIndexOf("[")),r=s.map(r=>t({name:n,type:e,types:a,value:r}));return[{type:"bytes32"},eB.keccak256(e$.encode(r.map(([e])=>e),r.map(([,e])=>e)))]}return[{type:i},s]}({types:n,name:t.name,type:t.type,value:r[t.name]});i.push(a),s.push(o)}return e$.encode(i,s)}({data:t,primaryType:r,types:a});return eB.keccak256(n)}class eZ extends eQ.BaseError{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.BytesSizeMismatchError"})}}class eJ extends eQ.BaseError{constructor({domain:e}){super(`Invalid domain "${E.stringify(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidDomainError"})}}class eG extends eQ.BaseError{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{metaMessages:["Check that the primary type is a key in `types`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidPrimaryTypeError"})}}class eX extends eQ.BaseError{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"TypedData.InvalidStructTypeError"})}}var e0=e.i(301393),e2=e.i(671426),e1=e.i(661855),e4=e.i(566296);e.s(["createHeadlessWebAuthnP256",()=>tS,"createP256",()=>tO,"createSecp256k1",()=>tz,"createWebAuthnP256",()=>tP,"createWebCryptoP256",()=>tC,"deserialize",()=>tT,"from",()=>tx,"fromHeadlessWebAuthnP256",()=>tL,"fromP256",()=>t_,"fromRelay",()=>tq,"fromRelayKeyRole",()=>tI,"fromRelayKeyType",()=>tv,"fromSecp256k1",()=>tR,"fromSerializedKeyType",()=>tj,"fromSerializedSpendPeriod",()=>tk,"fromWebAuthnP256",()=>tU,"fromWebCryptoP256",()=>tK,"getFeeToken",()=>tH,"hash",()=>t$,"resolvePermissions",()=>tF,"serialize",()=>tQ,"serializePublicKey",()=>tY,"serializeWebAuthnSignature",()=>tV,"sign",()=>tB,"toRelay",()=>tW,"toRelayKeyRole",()=>tE,"toRelayKeyType",()=>tA,"toSerializedKeyType",()=>tD,"toSerializedSpendPeriod",()=>tN,"wrapSignature",()=>tZ],376475);var e5=e.i(126935),e3=e.i(832049),e6=e.i(530067),e9=e.i(918785);function e8(e){let{privateKey:t}=e,r=e3.secp256r1.ProjectivePoint.fromPrivateKey("string"==typeof t?t.slice(2):e_.fromBytes(t).slice(2));return e9.from(r)}function e7(e={}){let{as:t="Hex"}=e,r=e3.secp256r1.utils.randomPrivateKey();return"Hex"===t?e_.fromBytes(r):r}function te(e){let{extraEntropy:t=e6.extraEntropy,hash:r,payload:a,privateKey:n}=e,{r:i,s,recovery:o}=e3.secp256r1.sign(a instanceof Uint8Array?a:eY.fromHex(a),n instanceof Uint8Array?n:eY.fromHex(n),{extraEntropy:"boolean"==typeof t?t:e_.from(t).slice(2),lowS:!0,...r?{prehash:!0}:{}});return{r:i,s,yParity:o}}e3.secp256r1;var tt=N;function tr(e,t=0){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new ta({value:e});let[r="",a="0"]=e.split("."),n=r.startsWith("-");if(n&&(r=r.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(r=`${BigInt(r)+1n}`),a="";else if(a.length>t){let[e,n,i]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],s=Math.round(Number(`${n}.${i}`));(a=s>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${s}`).length>t&&(a=a.slice(1),r=`${BigInt(r)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${n?"-":""}${r}${a}`)}class ta extends tt.BaseError{constructor({value:e}){super(`Value \`${e}\` is not a valid decimal number.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Value.InvalidDecimalNumberError"})}}let tn=new TextEncoder,ti=new TextDecoder,ts=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)])),to={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t])),61:0,45:62,95:63};function tl(e){let t=e.replace(/=+$/,""),r=t.length,a=new Uint8Array(r+3);tn.encodeInto(t+"===",a);for(let e=0,r=0;e<t.length;e+=4,r+=3){let t=(to[a[e]]<<18)+(to[a[e+1]]<<12)+(to[a[e+2]]<<6)+to[a[e+3]];a[r]=t>>16,a[r+1]=t>>8&255,a[r+2]=255&t}return new Uint8Array(a.buffer,0,(r>>2)*3+(r%4&&r%4-1))}var tc=N;async function td(e){try{let t=e.getPublicKey();if(!t)throw new tf;let r=new Uint8Array(t),a=await crypto.subtle.importKey("spki",new Uint8Array(r),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),n=new Uint8Array(await crypto.subtle.exportKey("raw",a));return e9.from(n)}catch(i){if("Permission denied to access object"!==i.message)throw i;let t=new Uint8Array(e.attestationObject),r=e=>{let r=new Uint8Array([e,88,32]);for(let e=0;e<t.length-r.length;e++)if(r.every((r,a)=>t[e+a]===r))return e+r.length;throw new tf},a=r(33),n=r(34);return e9.from(new Uint8Array([4,...t.slice(a,a+32),...t.slice(n,n+32)]))}}let tu=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);async function tp(e){let{createFn:t=window.navigator.credentials.create.bind(window.navigator.credentials),...r}=e,a=function(e){let{attestation:t="none",authenticatorSelection:r={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:a=tu,excludeCredentialIds:n,extensions:i,name:s,rp:o={id:window.location.hostname,name:window.document.title},user:l}=e,c=l?.name??s;return{publicKey:{attestation:t,authenticatorSelection:r,challenge:a,...n?{excludeCredentials:n?.map(e=>({id:tl(e),type:"public-key"}))}:{},pubKeyCredParams:[{type:"public-key",alg:-7}],...i&&{extensions:i},rp:o,user:{id:l?.id??eB.keccak256(eY.fromString(c),{as:"Bytes"}),name:c,displayName:l?.displayName??c}}}}(r);try{let e=await t(a);if(!e)throw new tf;let r=e.response,n=await td(r);return{id:e.id,publicKey:n,raw:e}}catch(e){throw new tf({cause:e})}}async function tm(e){let{getFn:t=window.navigator.credentials.get.bind(window.navigator.credentials),...r}=e,a=function(e){let{credentialId:t,challenge:r,extensions:a,rpId:n=window.location.hostname,userVerification:i="required"}=e;return{publicKey:{...t?{allowCredentials:Array.isArray(t)?t.map(e=>({id:tl(e),type:"public-key"})):[{id:tl(t),type:"public-key"}]}:{},challenge:eY.fromHex(r),...a&&{extensions:a},rpId:n,userVerification:i}}}(r);try{var n;let e,r,i,s,o,l=await t(a);if(!l)throw new ty;let c=l.response,d=String.fromCharCode(...new Uint8Array(c.clientDataJSON)),u=d.indexOf('"challenge"'),p=d.indexOf('"type"'),m=(n=new Uint8Array(c.signature),r=(e=0===n[4]?5:4)+32,i=0===n[r+2]?r+3:r+2,s=BigInt(e_.fromBytes(n.slice(e,r))),o=BigInt(e_.fromBytes(n.slice(i))),{r:s,s:o>e3.p256.CURVE.n/2n?e3.p256.CURVE.n-o:o});return{metadata:{authenticatorData:e_.fromBytes(new Uint8Array(c.authenticatorData)),clientDataJSON:d,challengeIndex:u,typeIndex:p,userVerificationRequired:"required"===a.publicKey.userVerification},signature:m,raw:l}}catch(e){throw new ty({cause:e})}}class tf extends tc.BaseError{constructor({cause:e}={}){super("Failed to create credential.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}}class ty extends tc.BaseError{constructor({cause:e}={}){super("Failed to request credential.",{cause:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}}async function th(e={}){let{extractable:t=!1}=e,r=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),a=await globalThis.crypto.subtle.exportKey("raw",r.publicKey),n=e9.from(new Uint8Array(a));return{privateKey:r.privateKey,publicKey:n}}async function tw(e){let{payload:t,privateKey:r}=e,a=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},r,eY.from(t)),n=eY.fromArray(new Uint8Array(a)),i=eY.toBigInt(eY.slice(n,0,32)),s=eY.toBigInt(eY.slice(n,32,64));return s>e3.p256.CURVE.n/2n&&(s=e3.p256.CURVE.n-s),{r:i,s}}var tg=e.i(47120);let tb="0x3232323232323232323232323232323232323232",tM="0x32323232",tv={p256:"p256",secp256k1:"secp256k1",webauthnp256:"webauthn-p256"},tI={admin:"admin",normal:"session"},tj={0:"p256",1:"webauthn-p256",2:"secp256k1"},tk={0:"minute",1:"hour",2:"day",3:"week",4:"month",5:"year"},tA={address:"secp256k1",p256:"p256",secp256k1:"secp256k1","webauthn-p256":"webauthnp256"},tE={admin:"admin",session:"normal"},tD={address:2,p256:0,secp256k1:2,"webauthn-p256":1},tN={day:2,hour:1,minute:0,month:4,week:3,year:5};function tO(e={}){let t=e7();return t_({...e,privateKey:t})}function tz(e={}){let t=eL.randomPrivateKey();return tR({...e,privateKey:t})}async function tP(e){let{createFn:t,label:r,rpId:a,userId:n}=e,i=await tp({authenticatorSelection:{requireResidentKey:!0,residentKey:"required",userVerification:"required"},createFn:t,extensions:{credProps:!0},rp:a?{id:a,name:a}:void 0,user:{displayName:r,id:new Uint8Array(n??eY.fromString(r)),name:r}});return tU({...e,credential:{id:i.id,publicKey:i.publicKey},id:n?eY.toHex(n):e9.toHex(i.publicKey,{includePrefix:!1})})}function tS(e={}){let t=e7();return tL({...e,privateKey:t})}async function tC(e={}){let t=await th();return tK({...e,keyPair:t})}function tT(e,t={}){let{chainId:r}=t,a=e.publicKey,n=tj[e.keyType];return tx({chainId:r,expiry:e.expiry,publicKey:a,role:e.isSuperAdmin?"admin":"session",type:n})}function tx(e,t={}){let r,{chainId:a=e.chainId}=t,{expiry:n=0,id:i,prehash:s=!1,role:o="admin",type:l}=e,c="0x"===(r=e.publicKey)?r:"secp256k1"===l||"address"===l?20===e_.size(r)||0n===e_.toBigInt(e_.slice(r,0,12))?e_.slice(r,-20):ex.fromPublicKey(e9.fromHex(r)):r;return{...e,chainId:a,expiry:n,hash:t$({publicKey:c,type:l}),id:(i??c).toLowerCase(),prehash:s,publicKey:c.toLowerCase(),role:o,type:l}}function t_(e){let{chainId:t,expiry:r,feeToken:a,permissions:n,privateKey:i,role:s}=e;return tx({chainId:t,expiry:r,feeToken:a,permissions:n,privateKey:()=>i,publicKey:e9.toHex(e8({privateKey:i}),{includePrefix:!1}),role:s,type:"p256"})}function tq(e,t){let{chainId:r}=t,{publicKey:a}=e,n=20===e_.size(a)||0n===e_.toBigInt(e_.slice(a,0,12)),i={};for(let t of e.permissions)"call"===t.type&&(i.calls??=[],i.calls.push({signature:t.selector,to:t.to===tb?void 0:t.to})),"spend"===t.type&&(i.spend??=[],i.spend.push({limit:t.limit,period:t.period,token:t.token}));return tx({chainId:r,expiry:e.expiry,permissions:i,publicKey:e.publicKey,role:tI[e.role],type:n?"address":tv[e.type]})}function tR(e){let{privateKey:t,role:r}=e,a=e.publicKey?e.publicKey:t?ex.fromPublicKey(eL.getPublicKey({privateKey:t})):e.address.toLowerCase();return tx({expiry:e.expiry??0,feeToken:e.feeToken,permissions:e.permissions,privateKey:t?()=>t:void 0,publicKey:a,role:r,type:"secp256k1"})}function tU(e){let{credential:t,id:r,rpId:a}=e,n=e9.toHex(t.publicKey,{includePrefix:!1});return tx({chainId:e.chainId,expiry:e.expiry??0,feeToken:e.feeToken,id:r,permissions:e.permissions,privateKey:{credential:t,rpId:a},publicKey:n,role:e.role,type:"webauthn-p256"})}function tL(e){let{privateKey:t}=e,r=e9.toHex(e8({privateKey:t}),{includePrefix:!1});return tx({chainId:e.chainId,expiry:e.expiry??0,feeToken:e.feeToken,permissions:e.permissions,privateKey:{privateKey:()=>t},publicKey:r,role:e.role,type:"webauthn-p256"})}function tK(e){let{chainId:t,expiry:r,feeToken:a,keyPair:n,permissions:i,role:s}=e,{privateKey:o}=n;return tx({chainId:t,expiry:r,feeToken:a,permissions:i,prehash:!0,privateKey:o,publicKey:e9.toHex(n.publicKey,{includePrefix:!1}),role:s,type:"p256"})}function t$(e){let{type:t}=e,r=tY(e.publicKey);return eB.keccak256(e$.encode([{type:"uint8"},{type:"bytes32"}],[tD[t],eB.keccak256(r)]))}function tY(e){return 32>e_.size(e)?e_.padLeft(e,32):e}function tQ(e){let{expiry:t=0,publicKey:r,role:a,type:n}=e;return{expiry:t,isSuperAdmin:"admin"===a,keyType:tD[n],publicKey:tY(r)}}async function tB(e,t){let{address:r,storage:a,webAuthn:n,wrap:i=!0}=t,{privateKey:s,publicKey:o,type:l}=e;if(!s)throw Error("Key does not have a private key to sign with.\n\nKey:\n"+E.stringify(e,null,2));let c=r?eH({domain:{verifyingContract:r},message:{digest:t.payload},primaryType:"ERC1271Sign",types:{ERC1271Sign:[{name:"digest",type:"bytes32"}]}}):t.payload,[d,u]=await (async()=>{if("p256"===l){let{privateKey:t}=e;if("function"==typeof t)return[eK.toHex(te({payload:c,privateKey:t()})),!1];if(t instanceof CryptoKey)return[eK.toHex(await tw({payload:c,privateKey:t})),!0]}if("secp256k1"===l)return[eK.toHex(eL.sign({payload:c,privateKey:s()})),!1];if("webauthn-p256"===l){if(s.privateKey){let{payload:e,metadata:t}=function(e){let{challenge:t,crossOrigin:r,extraClientData:a,flag:n,origin:i,rpId:s,signCount:o,userVerification:l="required"}=e,c=function(e={}){let{flag:t=5,rpId:r=window.location.hostname,signCount:a=0}=e,n=eB.sha256(e_.fromString(r)),i=e_.fromNumber(t,{size:1}),s=e_.fromNumber(a,{size:4});return e_.concat(n,i,s)}({flag:n,rpId:s,signCount:o}),d=function(e){let{challenge:t,crossOrigin:r=!1,extraClientData:a,origin:n=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:function(e,t={}){return function(e,t={}){let{pad:r=!0,url:a=!1}=t,n=new Uint8Array(4*Math.ceil(e.length/3));for(let t=0,r=0;r<e.length;t+=4,r+=3){let a=(e[r]<<16)+(e[r+1]<<8)+(0|e[r+2]);n[t]=ts[a>>18],n[t+1]=ts[a>>12&63],n[t+2]=ts[a>>6&63],n[t+3]=ts[63&a]}let i=e.length%3,s=4*Math.floor(e.length/3)+(i&&i+1),o=ti.decode(new Uint8Array(n.buffer,0,s));return r&&1===i&&(o+="=="),r&&2===i&&(o+="="),a&&(o=o.replaceAll("+","-").replaceAll("/","_")),o}(eY.fromHex(e),t)}(t,{url:!0,pad:!1}),origin:n,crossOrigin:r,...a})}({challenge:t,crossOrigin:r,extraClientData:a,origin:i}),u=eB.sha256(e_.fromString(d)),p=d.indexOf('"challenge"'),m=d.indexOf('"type"');return{metadata:{authenticatorData:c,clientDataJSON:d,challengeIndex:p,typeIndex:m,userVerificationRequired:"required"===l},payload:e_.concat(c,u)}}({challenge:c,origin:"https://ithaca.xyz",rpId:"ithaca.xyz"}),{r,s:a}=te({hash:!0,payload:e,privateKey:s.privateKey()});return[tV({metadata:t,signature:{r,s:a}}),!1]}let{credential:t,rpId:r}=s,i=`porto.webauthnVerified.${e.hash}`,o=Date.now(),l=!0;if(a){let e=await a.getItem(i);l=!e||o-e>6e5}let{signature:{r:d,s:u},raw:p,metadata:m}=await tm({challenge:c,credentialId:t.id,getFn:n?.getFn,rpId:r,userVerification:l?"required":"preferred"}),f=p.response;if(!f?.userHandle)throw Error("No user handle in response",{cause:{response:f}});let y=eY.toHex(new Uint8Array(f.userHandle));if(e.id&&ex.validate(e.id)&&!ex.isEqual(e.id,y))throw Error(`supplied webauthn key "${e.id}" does not match signature webauthn key "${y}"`,{cause:{id:y,key:e}});return l&&a&&await a.setItem(i,o),[tV({metadata:m,signature:{r:d,s:u}}),!1]}throw Error(`Key type "${l}" is not supported.

Key:
`+E.stringify(e,null,2))})();return i?tZ(d,{keyType:l,prehash:u,publicKey:o}):d}function tW(e,t={}){let{expiry:r=0,prehash:a=!1,publicKey:n,role:i="admin",type:s}=e,{feeTokens:o,orchestrator:l}=t,c=Object.entries(tF(e,{feeTokens:o})).map(([e,t])=>{if("calls"===e)return t.map(({signature:e,to:t})=>({selector:e?e_.validate(e)?e:e5.getSelector(e):tM,to:t??tb,type:"call"}));if("feeToken"!==e){if("spend"===e)return t.map(({limit:e,period:t,token:r})=>({limit:e,period:t,token:r,type:"spend"}));throw Error(`Invalid permission type "${e}".`)}}).flat().filter(Boolean);return"session"===e.role&&l&&c.push({selector:tM,to:l,type:"call"}),{expiry:r,permissions:c??[],prehash:a,publicKey:tY(n),role:tE[i],type:tA[s]}}function tF(e,t){let{permissions:r}=e,a=r?.calls?[...r.calls]:[],n=r?.spend?[...r.spend]:[],i=t.feeTokens?.filter(e=>e.feeToken);if(i&&i.length>0){let t=tH(e,{feeTokens:i});if(t){let e=-1,r=tN.year;for(let a=0;a<n.length;a++){let i=n[a];if(i.token&&ex.isEqual(t.address,i.token)||!i.token&&t.address===tg.zeroAddress){e=a;break}let s=tN[i.period];s<r&&(r=s)}-1!==e?(n[e]={...n[e],limit:n[e].limit+t.value},n.unshift(n.splice(e,1)[0])):"number"==typeof r&&n.unshift({limit:t.value,period:tk[r],token:t.address})}}return{...r,calls:a,spend:n}}function tH(e,t){let{feeTokens:r}=t;if(!e.feeToken)return;let a=r.find(t=>e.feeToken.symbol===t.symbol||(!e.feeToken.symbol||"native"===e.feeToken.symbol)&&t.address===tg.zeroAddress);if(!a)return;let n=tr(e.feeToken.limit,a.decimals);return{...a,value:n}}function tV(e){let{metadata:t,signature:r}=e;return e$.encode(e$.from(["struct WebAuthnAuth { bytes authenticatorData; string clientDataJSON; uint256 challengeIndex; uint256 typeIndex; bytes32 r; bytes32 s; }","WebAuthnAuth auth"]),[{authenticatorData:t.authenticatorData,challengeIndex:BigInt(t.challengeIndex),clientDataJSON:t.clientDataJSON,r:e_.fromNumber(r.r,{size:32}),s:e_.fromNumber(r.s,{size:32}),typeIndex:BigInt(t.typeIndex)}])}function tZ(e,t){let{keyType:r,prehash:a=!1,publicKey:n}=t,i=t$({publicKey:n,type:r});return e$.encodePacked(["bytes","bytes32","bool"],[e,i,a])}function tJ(e){let t="string"==typeof e?{address:e}:e,r=t.sign?"privateKey":"porto",{address:a,sign:n,signMessage:i,signTransaction:s,signTypedData:o,type:l}=function(e){if("string"==typeof e){if(!(0,e4.isAddress)(e,{strict:!1}))throw new e1.InvalidAddressError({address:e});return{address:e,type:"json-rpc"}}if(!(0,e4.isAddress)(e.address,{strict:!1}))throw new e1.InvalidAddressError({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}({address:t.address,sign({hash:e}){if("porto"===r)throw Error("`sign` not supported on porto accounts.");if(!t.sign)throw Error("`sign` not supported.");return t.sign({hash:e})},signMessage({message:e}){return this.sign({hash:(0,e0.hashMessage)(e)})},signTransaction(){throw Error("`signTransaction` not supported on porto accounts.")},signTypedData(e){return this.sign({hash:(0,e2.hashTypedData)(e)})}});return{address:a,keys:t.keys??void 0,sign:n,signMessage:i,signTransaction:s,signTypedData:o,source:r,type:l}}function tG(e,t={}){let{keys:r}=t;return tJ({address:ex.fromPublicKey(eL.getPublicKey({privateKey:e})),keys:r,sign:async({hash:t})=>eK.toHex(eL.sign({payload:t,privateKey:e})),source:"privateKey"})}function tX(e,t={}){let{key:r,role:a}=t;if(null!==r){if("object"==typeof r)return r;if(e.keys&&e.keys.length>0)return"number"==typeof r?e.keys[r]:e.keys.find(e=>e.privateKey&&(!a||e.role===a))}}async function t0(e,t){let{storage:r,replaySafe:a=!0,wrap:n=!0,webAuthn:i}=t,s=tX(e,t),o=a?eH({domain:{verifyingContract:e.address},message:{digest:t.payload},primaryType:"ERC1271Sign",types:{ERC1271Sign:[{name:"digest",type:"bytes32"}]}}):t.payload,l=s?({hash:e})=>tB(s,{address:null,payload:e,storage:r,webAuthn:i,wrap:n}):"privateKey"===e.source?e.sign:void 0;if(!l)throw Error("cannot find key to sign with.");return await l({hash:o})}e.s(["from",()=>tJ,"fromPrivateKey",()=>tG,"getKey",()=>tX,"sign",()=>t0],225470),e.i(67126);var t2=e.i(969016);function t1(e,t={}){return t2.from(e,t)}let t4=t1({inputs:[{name:"message",type:"string"}],name:"Error",type:"error"}),t5=t1({inputs:[{name:"reason",type:"uint8"}],name:"Panic",type:"error"});var t3=N,t6=e.i(798138),t9=e.i(580180),t8=e.i(640446),t7=e.i(567365),re=t6;re.BaseError;class rt extends re.BaseError{constructor(){super("Function is not recognized.",{metaMessages:["This could be due to any of the following:","  - The contract does not have the function,","  - The address is not a contract."],name:"FunctionSelectorNotRecognizedError"})}}var rr=e.i(216143),ra=e.i(311299);async function rn(e,t){try{let r="wallet_getAuthorization",a=await (0,eR.withCache)(()=>e.request({method:r,params:[eU.encode(rr.wallet_getAuthorization.Parameters,t)]}),{cacheKey:`${e.uid}.${r}.${t.address}`});return eU.decode(rr.wallet_getAuthorization.Response,a)}catch(e){throw rA(e),e}}async function ri(e,t={}){let r=t.chainId?[t.chainId]:"all"!==t.chainIds?t.chainIds?t.chainIds:[e.chain.id]:void 0;try{let a="wallet_getCapabilities",n=await (0,eR.withCache)(()=>e.request({method:a,params:r?[r]:void 0},{retryCount:0}),{cacheKey:`${e.uid}.${a}.${r?.join(",")}`}),i=t.raw?n:eU.decode(rr.wallet_getCapabilities.Response,n);if(t.chainIds)return i;return Object.values(i)[0]}catch(e){throw rA(e),e}}async function rs(e,t){let{account:r,assetFilter:a,assetTypeFilter:n,chainFilter:i}=t;try{let t=await e.request({method:"wallet_getAssets",params:[eU.encode(rr.wallet_getAssets.Parameters,{account:r,assetFilter:a,assetTypeFilter:n,chainFilter:i})]}),s=eU.decode(rr.wallet_getAssets.Response,t),o=Object.entries(s).reduce((e,[t,r])=>(e[e_.toNumber(t)]=r,e),{}),l={};for(let e of Object.values(o))for(let t of e){let e=JSON.stringify(t.metadata);l[e]={...t,balance:t.balance+(l[e]?.balance??0n)}}return{...o,0:Object.values(l)}}catch(e){throw rA(e),e}}async function ro(e,t){let{address:r,chain:a=e.chain,tokenAddress:n,value:i}=t;try{let t=await e.request({method:"wallet_addFaucetFunds",params:[eU.encode(rr.wallet_addFaucetFunds.Parameters,{address:r,chainId:a?.id,tokenAddress:n,value:i})]},{retryCount:0});return await new Promise(e=>setTimeout(e,2e3)),t}catch(e){throw rA(e),e}}async function rl(e,t){let{id:r}=t;try{let t=await e.request({method:"wallet_getCallsStatus",params:[r]});return eU.decode(rr.wallet_getCallsStatus.Response,t)}catch(e){throw rA(e),e}}async function rc(e,t){let{address:r,chainIds:a}=t;try{let t=await e.request({method:"wallet_getKeys",params:[eU.encode(rr.wallet_getKeys.Parameters,{address:r,chainIds:a})]});return eU.decode(rr.wallet_getKeys.Response,t)}catch(e){throw rA(e),e}}async function rd(e){let t="health",r=await (0,eR.withCache)(()=>e.request({method:t}),{cacheKey:`${e.uid}.${t}`});return eU.decode(rr.health.Response,r)}async function ru(e,t){let{address:r,capabilities:a,chain:n=e.chain,key:i}=t,s=t.calls.map(e=>({data:e.abi?e5.encodeData(e5.fromAbi(e.abi,e.functionName),e.args):e.data??"0x",to:e.to,value:e.value??0n}));try{let t=await e.request({method:"wallet_prepareCalls",params:[eU.encode(rr.wallet_prepareCalls.Parameters,{calls:s,capabilities:{...a,meta:{...a?.meta}},chainId:n?.id,from:r,key:i?{prehash:i.prehash,publicKey:i.publicKey,type:i.type}:void 0})]},{retryCount:0});return Object.assign(eU.decode(rr.wallet_prepareCalls.Response,t),{_raw:t})}catch(e){throw rA(e),rk(e,{calls:t.calls}),e}}async function rp(e,t){let{address:r,chain:a=e.chain,delegation:n,...i}=t;try{let t=await e.request({method:"wallet_prepareUpgradeAccount",params:[eU.encode(rr.wallet_prepareUpgradeAccount.Parameters,el({address:r,capabilities:i,chainId:a?.id,delegation:n}))]},{retryCount:0});return eU.decode(rr.wallet_prepareUpgradeAccount.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rm(e,t){let{capabilities:r,context:a,key:n,signature:i}=t;try{let t=await e.request({method:"wallet_sendPreparedCalls",params:[eU.encode(rr.wallet_sendPreparedCalls.Parameters,{capabilities:r,context:{preCall:a.preCall,quote:a.quote},key:n?{prehash:n.prehash,publicKey:n.publicKey,type:n.type}:void 0,signature:i})]},{retryCount:0});return eU.decode(rr.wallet_sendPreparedCalls.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rf(e,t){let{address:r,secret:a}=t;try{let t=await e.request({method:"account_getOnrampContactInfo",params:[eU.encode(rr.account_getOnrampContactInfo.Parameters,{address:r,secret:a})]},{retryCount:0});return eU.decode(rr.account_getOnrampContactInfo.Response,t)}catch(e){throw rA(e),rk(e),e}}async function ry(e,t){let{address:r}=t;try{let t=await e.request({method:"account_onrampStatus",params:[eU.encode(rr.account_onrampStatus.Parameters,{address:r})]},{retryCount:0});return eU.decode(rr.account_onrampStatus.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rh(e,t){let{phone:r,walletAddress:a}=t;try{let t=await e.request({method:"account_resendVerifyPhone",params:[eU.encode(rr.account_resendVerifyPhone.Parameters,{phone:r,walletAddress:a})]},{retryCount:0});return eU.decode(rr.account_resendVerifyPhone.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rw(e,t){let{email:r,walletAddress:a}=t;try{let t=await e.request({method:"account_setEmail",params:[eU.encode(rr.account_setEmail.Parameters,{email:r,walletAddress:a})]},{retryCount:0});return eU.decode(rr.account_setEmail.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rg(e,t){let{phone:r,walletAddress:a}=t;try{let t=await e.request({method:"account_setPhone",params:[eU.encode(rr.account_setPhone.Parameters,{phone:r,walletAddress:a})]},{retryCount:0});return eU.decode(rr.account_setPhone.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rb(e,t){let{context:r,signatures:a}=t;try{await e.request({method:"wallet_upgradeAccount",params:[eU.encode(rr.wallet_upgradeAccount.Parameters,{context:r,signatures:a})]},{retryCount:0})}catch(e){throw rA(e),rk(e),e}}async function rM(e,t){let{chainId:r,email:a,signature:n,token:i,walletAddress:s}=t;try{let t=await e.request({method:"account_verifyEmail",params:[eU.encode(rr.account_verifyEmail.Parameters,{chainId:r,email:a,signature:n,token:i,walletAddress:s})]},{retryCount:0});return eU.decode(rr.account_verifyEmail.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rv(e,t){let{code:r,phone:a,walletAddress:n}=t;try{let t=await e.request({method:"account_verifyPhone",params:[eU.encode(rr.account_verifyPhone.Parameters,{code:r,phone:a,walletAddress:n})]},{retryCount:0});return eU.decode(rr.account_verifyPhone.Response,t)}catch(e){throw rA(e),rk(e),e}}async function rI(e,t){let{signature:r}=t,{signature:a,capabilities:{feeSignature:n,...i},...s}=t.response,o=function e(t){if("object"==typeof t&&null!==t){if(Array.isArray(t))return t.map(e);let r={};for(let a of Object.keys(t).sort())r[a]=e(t[a]);return r}return t}({capabilities:i,...s}),l=eB.keccak256(e_.fromString(JSON.stringify(o))),c=eL.recoverAddress({payload:l,signature:eK.fromHex(r)}),{quoteSigner:d}=await rd(e);return c===d}async function rj(e,t){let{address:r,chain:a=e.chain,digest:n,signature:i}=t;try{async function s(){let t=await (0,t9.verifyHash)(e,{address:r,hash:n,signature:i});return{proof:null,valid:t}}let t=await (async()=>{let t=await e.request({method:"wallet_verifySignature",params:[eU.encode(rr.wallet_verifySignature.Parameters,{address:r,chainId:a?.id,digest:n,signature:i})]},{retryCount:0}).catch(s);return t.valid?t:s()})();return eU.decode(rr.wallet_verifySignature.Response,t)}catch(e){throw rA(e),e}}function rk(e,{calls:t}={}){if(!(e instanceof t6.BaseError))return;let r=function(e,t){var r;let a=e.walk(e=>"data"in e);if(!a?.data)return e;if(a.data===(r=t1("error FnSelectorNotRecognized()"),t2.getSelector(r)))return new rt;let n=null;for(let e of t.calls)if(e.abi)try{if(!(0,t8.decodeErrorResult)({abi:e.abi,data:a.data}))continue;n=e}catch{}return n?(0,t7.getContractError)(a,{abi:n.abi,address:n.to,args:n.args,functionName:n.functionName}):e}(e,{calls:t??[]}),a=(e=>{try{if("ContractFunctionExecutionError"===e.name){let t="ContractFunctionRevertedError"===e.cause.name?e.cause.data:void 0;if(t)return function(e,t,r){if("Error"===t)return t4;if("Panic"===t)return t5;if(e_.validate(t,{strict:!1})){let e=e_.slice(t,0,4);if("0x08c379a0"===e)return t4;if("0x4e487b71"===e)return t5}let a=t2.fromAbi(e,t,void 0);if("error"!==a.type)throw new t2.NotFoundError({name:t,type:"error"});return a}([t.abiItem],t.errorName)}let t=e.walk(e=>!(e instanceof Error)&&3===e.code);if(!t)return;let{data:r,message:a}=t;if("0xd0d5039b"===r)return t1("error Unauthorized()");return{inputs:[],name:(a??r).split("(")[0],type:"error"}}catch{return}})(r);if(r!==e||a)throw new rE(Object.assign(r,{abiError:a}))}function rA(e){if("$ZodError"===e.name)throw ra.toValidationError(e)}class rE extends t3.BaseError{constructor(e){super("An error occurred while executing calls.",{cause:e,metaMessages:[e.abiError&&"Reason: "+e.abiError.name].filter(Boolean)}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Rpc.ExecutionError"}),Object.defineProperty(this,"abiError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiError=e.abiError}}var rD=e.i(581597),rN=e.i(914016),rO=e.i(333907),rz=e.i(236288);let rP={anvil:{http:"http://localhost:9119"},prod:{http:"https://rpc.porto.sh"},stg:{http:"https://stg-rpc.porto.sh"}};function rS(e){return t=>{let r=e.public(t),a=e.relay(t);return(0,rz.createTransport)({key:rS.type,name:"Relay Proxy",request:async({method:e,params:t},n)=>{var i;return(i=e).startsWith("wallet_")||i.startsWith("account_")||"health"===i?a.request({method:e,params:t},n):r.request({method:e,params:t},n)},type:rS.type})}}(rS||(rS={})).type="relayProxy",e.s(["relayProxy",()=>rS,"relayUrls",0,rP],893845);let rC=new Map;var rT=e.i(781062);let rx=rT.Permissions;function r_(e,t){let{chainId:r,expiry:a,permissions:n,id:i,publicKey:s,type:o}=e,{address:l}=t;return{address:l,chainId:r,expiry:a,id:i,key:{publicKey:s,type:o},permissions:n??{}}}function rq(e){let{chainId:t,expiry:r,key:a}=e;return tx({chainId:t,expiry:r,permissions:e.permissions??{},publicKey:a.publicKey,role:"session",type:a.type})}var rR=e.i(522639),rU=e.i(36878);let rL=rR.discriminatedUnion("method",[rU.account_verifyEmail.Request,rU.wallet_addFunds.Request,rU.eth_accounts.Request,rU.eth_chainId.Request,rU.eth_requestAccounts.Request,rU.eth_sendTransaction.Request,rU.eth_signTypedData_v4.Request,rU.wallet_getAccountVersion.Request,rU.wallet_getAdmins.Request,rU.wallet_getPermissions.Request,rU.wallet_grantAdmin.Request,rU.wallet_grantPermissions.Request,rU.wallet_prepareUpgradeAccount.Request,rU.wallet_revokeAdmin.Request,rU.wallet_revokePermissions.Request,rU.wallet_upgradeAccount.Request,rU.personal_sign.Request,rU.porto_ping.Request,rU.wallet_connect.Request,rU.wallet_disconnect.Request,rU.wallet_getAssets.Request,rU.wallet_getCallsStatus.Request,rU.wallet_getCapabilities.Request,rU.wallet_getKeys.Request,rU.wallet_prepareCalls.Request,rU.wallet_sendCalls.Request,rU.wallet_sendPreparedCalls.Request,rU.wallet_switchEthereumChain.Request,rU.wallet_verifySignature.Request]);function rK(e,t){let r=eU.safeParse(e,t);if(r.error){let e=r.error.issues.at(0);if(e?.code==="invalid_union"&&"No matching discriminator"===e.note)throw new x;throw new L(ra.toValidationError(r.error))}return{...t,_decoded:r.data}}async function r$(e){e.persist.hasHydrated()||await new Promise(t=>{e.persist.onFinishHydration(()=>t(!0)),setTimeout(()=>t(!0),100)})}function rY(e){if(e)return e.startsWith("/")?`${window.location.origin}${e}`:e}function rQ(e){let t,r,a,n,{config:i,getMode:s,id:o,store:l}=e,{announceProvider:c}=i;function d(e={}){let t=u(),r=e.request??rK(rL,{method:"wallet_getCapabilities",params:e.chainIds?[void 0,e.chainIds]:void 0});return(0,eR.withCache)(()=>s().actions.getCapabilities({chainIds:e.chainIds,internal:{client:t,config:i,request:r,store:l}}),{cacheKey:`getCapabilities.${o}.${e.chainIds?.join(",")}`})}function u(t){return function(e,t={}){let{config:r,id:a,store:n}=e._internal,{chains:i,relay:s}=r,o=n.getState(),l=t.chainId??o.chainIds[0],c=i.find(e=>e.id===l);if(!c)throw Error(`Could not find a compatible Porto chain on the given chain configuration.

Provided chains: [${i.map(e=>`${e.name} (id: ${e.id})`).join(", ")}]
Needed chain (id): ${l}
Please add this chain (id) to your chain configuration.`);let d=rS({public:r.transports[c.id]??(0,rN.fallback)(c.rpcUrls.default.http.map(e=>(0,rO.http)(e))),relay:s}),u=[a,E.stringify(c)].filter(Boolean).join(":");if(rC.has(u))return rC.get(u);let p=(0,rD.createClient)({...t,chain:c,pollingInterval:1e3,transport:d});return rC.set(u,p),p}({_internal:e},{chainId:"string"==typeof t?e_.toNumber(t):t})}let p=new Map,m=[],f={get eventNames(){return t.eventNames.bind(t)},get listenerCount(){return t.listenerCount.bind(t)},get listeners(){return t.listeners.bind(t)},addListener:(t=new D.EventEmitter).addListener.bind(t),emit:t.emit.bind(t),off:t.off.bind(t),on:t.on.bind(t),once:t.once.bind(t),removeAllListeners:t.removeAllListeners.bind(t),removeListener:t.removeListener.bind(t)},y=ea({...f,async request(e){await r$(l);let t=["eth_accounts","eth_chainId","eth_requestAccounts","wallet_getAssets","wallet_getCapabilities","wallet_getKeys","wallet_getPermissions","wallet_getAccountVersion","wallet_connect"].includes(e.method);return eu(async()=>{let t;try{t=rK(rL,e)}catch(t){if(!(t instanceof x))throw t;if(e.method.startsWith("wallet_"))throw new W;return u().request(e)}let r=l.getState();switch(t.method){case"account_verifyEmail":{if(0===r.accounts.length)throw new F;let[e]=t._decoded.params,{chainId:a,email:n,token:o,walletAddress:c}=e,d=u(a);if(a&&a!==d.chain.id)throw new H;let p=c?r.accounts.find(e=>ex.isEqual(e.address,c)):r.accounts[0];if(!p)throw new B;return await s().actions.verifyEmail({account:p,chainId:a,email:n,internal:{client:d,config:i,request:t,store:l},token:o,walletAddress:c})}case"wallet_addFunds":{if(0===r.accounts.length)throw new F;let{address:e,value:a,token:n}=t.params[0]??{},o=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!o)throw new B;let c=u(),d=await s().actions.addFunds({address:o.address,internal:{client:c,config:i,request:t,store:l},token:n,value:a});return f.emit("message",{data:null,type:"assetsChanged"}),d}case"eth_accounts":if(0===r.accounts.length)throw new F;return r.accounts.map(rF);case"eth_chainId":return e_.fromNumber(r.chainIds[0]);case"eth_requestAccounts":{if(r.accounts.length>0&&p.get("eth_requestAccounts"))return r.accounts.map(rF);let e=u(),{accounts:a}=await s().actions.loadAccounts({internal:{client:e,config:i,request:t,store:l}});return l.setState(e=>({...e,accounts:a})),f.emit("connect",{chainId:e_.fromNumber(e.chain.id)}),p.set("eth_requestAccounts",!0),setTimeout(()=>p.delete("eth_requestAccounts"),1e3),a.map(rF)}case"eth_sendTransaction":{if(0===r.accounts.length)throw new F;let[{capabilities:e,chainId:a,data:n="0x",from:o,to:c,value:d}]=t._decoded.params,p=u(a);if(a&&a!==p.chain.id)throw new H;let m=o?r.accounts.find(e=>ex.isEqual(e.address,o)):r.accounts[0];if(!m)throw new B;let{id:f}=await s().actions.sendCalls({account:m,asTxHash:!0,calls:[{data:n,to:c,value:d}],chainId:p.chain.id,internal:{client:p,config:i,request:t,store:l},merchantUrl:rY(i.merchantUrl??e?.merchantUrl)});return f}case"eth_signTypedData_v4":{if(0===r.accounts.length)throw new F;let[e,a]=t._decoded.params,n=r.accounts.find(t=>ex.isEqual(t.address,e));if(!n)throw new B;let o=u();return await s().actions.signTypedData({account:n,data:a,internal:{client:o,config:i,request:t,store:l}})}case"wallet_grantAdmin":{if(0===r.accounts.length)throw new F;let[{address:e,capabilities:a,chainId:n,key:o}]=t._decoded.params??[{}],c=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!c)throw new B;let d=u(n);if(rB([...c.keys??[]])?.some(e=>e.publicKey?.toLowerCase()===o.publicKey.toLowerCase()))throw new L({message:"Key already granted as admin."});let{key:p}=await s().actions.grantAdmin({account:c,feeToken:a?.feeToken,internal:{client:d,config:i,request:t,store:l},key:o});l.setState(e=>{let t=e.accounts.findIndex(e=>!c||ex.isEqual(e.address,c.address));return -1===t?e:{...e,accounts:e.accounts.map((e,r)=>r===t?{...e,keys:[...e.keys??[],p]}:e)}});let m=rB([...c.keys??[],p]);return f.emit("message",{data:null,type:"adminsChanged"}),eU.encode(rU.wallet_grantAdmin.Response,{address:c.address,chainId:d.chain.id,key:m.at(-1)})}case"wallet_grantPermissions":{if(0===r.accounts.length)throw new F;let[{address:e,chainId:a,...n}]=t._decoded.params??[{}],o=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!o)throw new B;let c=u(a),{key:d}=await s().actions.grantPermissions({account:o,internal:{client:c,config:i,request:t,store:l},permissions:n});return l.setState(e=>{let t=e.accounts.findIndex(e=>!o||ex.isEqual(e.address,o.address));return -1===t?e:{...e,accounts:e.accounts.map((e,r)=>r===t?{...e,keys:[...e.keys??[],d]}:e)}}),f.emit("message",{data:null,type:"permissionsChanged"}),eU.encode(rU.wallet_grantPermissions.Response,{...r_(d,{address:o.address})})}case"wallet_getAdmins":{if(0===r.accounts.length)throw new F;let[{address:e,chainId:a}]=t._decoded.params??[{}],n=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!n)throw new B;let o=u(a),c=rB(await s().actions.getKeys({account:n,internal:{client:o,config:i,request:t,store:l}}));return eU.encode(rU.wallet_getAdmins.Response,{address:n.address,chainId:o.chain.id,keys:c})}case"wallet_prepareUpgradeAccount":{let[{address:e,capabilities:r,chainId:a}]=t._decoded.params??[{}],{email:n,label:o,grantPermissions:c}=r??{},d=u(a),{context:p,digests:f}=await s().actions.prepareUpgradeAccount({address:e,email:n,internal:{client:d,config:i,request:t,store:l},label:o,permissions:c});return m.push(p.account),{context:p,digests:f}}case"wallet_getAccountVersion":{if(0===r.accounts.length)throw new F;let[{address:e}]=t._decoded.params??[{}],a=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!a)throw new B;let n=u(),{current:o,latest:c}=await s().actions.getAccountVersion({address:a.address,internal:{client:n,config:i,request:t,store:l}});return{current:o,latest:c}}case"wallet_getKeys":{if(0===r.accounts.length)throw new F;let[{address:e,chainIds:a}]=t._decoded.params??[{}],n=r.accounts.find(t=>ex.isEqual(t.address,e));if(!n)throw new B;let o=u(),c=await s().actions.getKeys({account:n,chainIds:a,internal:{client:o,config:i,request:t,store:l}});return eU.encode(rU.wallet_getKeys.Response,c)}case"wallet_getPermissions":{if(0===r.accounts.length)throw new F;let[{address:e,chainIds:a}]=t._decoded.params??[{}],n=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!n)throw new B;let o=u();return rW(await s().actions.getKeys({account:n,chainIds:a,internal:{client:o,config:i,request:t,store:l}}),{address:n.address})}case"wallet_revokeAdmin":{if(0===r.accounts.length)throw new F;let[{address:e,capabilities:a,id:n}]=t._decoded.params,o=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!o)throw new B;let c=u();await s().actions.revokeAdmin({account:o,feeToken:a?.feeToken,id:n,internal:{client:c,config:i,request:t,store:l}});let d=o.keys?.filter(e=>e.id.toLowerCase()!==n.toLowerCase());l.setState(e=>({...e,accounts:e.accounts.map(e=>ex.isEqual(e.address,o.address)?{...e,keys:d}:e)})),f.emit("message",{data:null,type:"adminsChanged"});return}case"wallet_revokePermissions":{if(0===r.accounts.length)throw new F;let[{address:e,capabilities:a,id:n}]=t._decoded.params,o=e?r.accounts.find(t=>ex.isEqual(t.address,e)):r.accounts[0];if(!o)throw new B;let c=u();await s().actions.revokePermissions({account:o,feeToken:a?.feeToken,id:n,internal:{client:c,config:i,request:t,store:l}});let d=o.keys?.filter(e=>e.id.toLowerCase()!==n.toLowerCase());l.setState(e=>({...e,accounts:e.accounts.map(e=>ex.isEqual(e.address,o.address)?{...e,keys:d}:e)})),f.emit("message",{data:null,type:"permissionsChanged"});return}case"wallet_upgradeAccount":{let[{context:e,signatures:r}]=t._decoded.params??[{}],a=u(),n=m.find(t=>ex.isEqual(t.address,e.account.address));if(!n)throw new B;let{account:o}=await s().actions.upgradeAccount({account:n,context:e,internal:{client:a,config:i,request:t,store:l},signatures:r}),c=rB(o.keys??[]),d=rW(o.keys??[],{address:o.address});return l.setState(e=>({...e,accounts:[o]})),f.emit("connect",{chainId:e_.fromNumber(a.chain.id)}),{address:o.address,capabilities:{admins:c,...d.length>0?{permissions:d}:{}}}}case"porto_ping":return"pong";case"personal_sign":{if(0===r.accounts.length)throw new F;let[e,a]=t._decoded.params,n=r.accounts.find(e=>ex.isEqual(e.address,a));if(!n)throw new B;let o=u();return await s().actions.signPersonalMessage({account:n,data:e,internal:{client:o,config:i,request:t,store:l}})}case"wallet_connect":{let[{capabilities:e,chainIds:a}]=t._decoded.params??[{}],n=u(a?.[0]),o=n.chain.id,{createAccount:c,email:d,grantAdmins:p,grantPermissions:m,selectAccount:y,signInWithEthereum:h}=e??{},w={client:n,config:i,request:t,store:l},{accounts:g}=await (async()=>{if(d||c){let{label:e}="object"==typeof c?c:{},{account:t}=await s().actions.createAccount({admins:p,email:d,internal:w,label:e,permissions:m,signInWithEthereum:h});return{accounts:[t]}}let e=r.accounts[0],{address:t,key:a}=(()=>{if(y)return"object"==typeof y?y:{address:void 0,key:void 0};for(let t of e?.keys??[])if("webauthn-p256"===t.type&&"admin"===t.role)return{address:e?.address,key:{credentialId:t.credentialId??t.privateKey?.credential?.id,publicKey:t.publicKey}};return{address:void 0,key:void 0}})(),n={internal:w,permissions:m,signInWithEthereum:h};try{return await s().actions.loadAccounts({address:t,key:a,...n})}catch(e){if(e instanceof Q)throw e;if(t&&a)return await s().actions.loadAccounts(n);throw e}})();l.setState(e=>({...e,accounts:g}));let b=[o,...l.getState().chainIds.filter(e=>e!==o)];return f.emit("connect",{chainId:e_.fromNumber(b[0])}),{accounts:g.map(e=>({address:rF(e),capabilities:{admins:e.keys?rB(e.keys):[],permissions:e.keys?rW(e.keys,{address:e.address}):[],...e.signInWithEthereum&&{signInWithEthereum:e.signInWithEthereum}}})),chainIds:b.map(e=>e_.fromNumber(e))}}case"wallet_disconnect":{let e=u();await s().actions.disconnect?.({internal:{client:e,config:i,request:t,store:l}}),l.setState(e=>({...e,accounts:[]})),f.emit("disconnect",new F);return}case"wallet_getAssets":{let[e]=t._decoded.params??[],{account:r,chainFilter:a,assetFilter:n,assetTypeFilter:o}=e,c=u(),d=Object.entries(await s().actions.getAssets({account:r,assetFilter:n,assetTypeFilter:o,chainFilter:a,internal:{client:c,config:i,request:t,store:l}})).reduce((e,[t,r])=>(e[e_.fromNumber(Number(t))]=r,e),{});return eU.encode(rU.wallet_getAssets.Response,d)}case"wallet_getCallsStatus":{let[e]=t._decoded.params??[],r=u();return await s().actions.getCallsStatus({id:e,internal:{client:r,config:i,request:t,store:l}})}case"wallet_getCapabilities":{let[e,r]=t.params??[];return await d({chainIds:r,request:t})}case"wallet_prepareCalls":{let[e]=t._decoded.params,{calls:a,capabilities:n,chainId:o,key:c,from:d}=e,p=u(o),m=d??r.accounts[0];if(!m)throw new B;if(o&&o!==p.chain.id)throw new H;let{digest:f,...y}=await s().actions.prepareCalls({account:tJ(m),calls:a,feeToken:n?.feeToken,internal:{client:p,config:i,request:t,store:l},key:c,merchantUrl:rY(i.merchantUrl??n?.merchantUrl),requiredFunds:n?.requiredFunds});return eU.encode(rU.wallet_prepareCalls.Response,{capabilities:y.capabilities,chainId:e_.fromNumber(y.chainId??p.chain.id),context:{...y.context,account:{address:y.account.address},calls:y.context.calls??[],nonce:y.context.nonce??0n},digest:f,key:y.key,typedData:y.typedData})}case"wallet_sendPreparedCalls":{let[e]=t._decoded.params,{chainId:r,context:a,key:n,signature:o}=e,{account:c}=e.context,d=u(r);if(r&&e_.toNumber(r)!==d.chain.id)throw new H;return[{id:await s().actions.sendPreparedCalls({account:tJ(c),context:a,internal:{client:d,config:i,request:t,store:l},key:n,signature:o})}]}case"wallet_sendCalls":{if(0===r.accounts.length)throw new F;let[e]=t._decoded.params,{calls:a,capabilities:n,chainId:o,from:c}=e,d=u(o);if(o&&o!==d.chain.id)throw new H;let p=c?r.accounts.find(e=>ex.isEqual(e.address,c)):r.accounts[0];if(!p)throw new B;let{id:m}=await s().actions.sendCalls({account:p,calls:a,chainId:d.chain.id,feeToken:n?.feeToken,internal:{client:d,config:i,request:t,store:l},merchantUrl:rY(i.merchantUrl??n?.merchantUrl),permissionsId:n?.permissions?.id,requiredFunds:n?.requiredFunds});return{id:m}}case"wallet_switchEthereumChain":{let[e]=t._decoded.params,{chainId:r}=e,a=e_.toNumber(r);if(!i.chains.find(e=>e.id===a))throw new J;let n=u(r);await s().actions.switchChain?.({chainId:n.chain.id,internal:{client:n,config:i,request:t,store:l}}),l.setState(e=>({...e,chainIds:[a,...e.chainIds.filter(e=>e!==a)]}));return}case"wallet_verifySignature":{let[e]=t._decoded.params,{address:r,chainId:a,digest:n,signature:i}=e,s=u(a);return{...await rj(s,{address:r,digest:n,signature:i}),address:r,chainId:e_.fromNumber(s.chain.id)}}}},{enabled:t,id:E.stringify(e)})}}),h=(r=()=>{},a=()=>{},r$(l).then(()=>{d().catch(()=>{}),r(),r=l.subscribe(e=>e.accounts,e=>{f.emit("accountsChanged",e.map(rF))},{equalityFn:(e,t)=>e.every((e,r)=>e.address===t[r]?.address)}),a(),a=l.subscribe(e=>e.chainIds[0],(e,t)=>{e!==t&&f.emit("chainChanged",e_.fromNumber(e))})}),n=function(e,t){if(!t||"undefined"==typeof window||!window.dispatchEvent)return()=>{};let{icon:r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDIyIiBoZWlnaHQ9IjQyMiIgdmlld0JveD0iMCAwIDQyMiA0MjIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MjIiIGhlaWdodD0iNDIyIiBmaWxsPSJibGFjayIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMV8xNSkiPgo8cGF0aCBkPSJNODEgMjg2LjM2NkM4MSAyODAuODkzIDg1LjQ1MDUgMjc2LjQ1NSA5MC45NDA0IDI3Ni40NTVIMzI5LjUxMUMzMzUuMDAxIDI3Ni40NTUgMzM5LjQ1MiAyODAuODkzIDMzOS40NTIgMjg2LjM2NlYzMDYuMTg4QzMzOS40NTIgMzExLjY2MiAzMzUuMDAxIDMxNi4wOTkgMzI5LjUxMSAzMTYuMDk5SDkwLjk0MDRDODUuNDUwNSAzMTYuMDk5IDgxIDMxMS42NjIgODEgMzA2LjE4OFYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAyMzQuODI4Qzg1LjQ1MDUgMjM0LjgyOCA4MSAyMzkuMjY2IDgxIDI0NC43MzlWMjcxLjUzMUM4My44NDMyIDI2OS42MzMgODcuMjYyMiAyNjguNTI2IDkwLjk0MDQgMjY4LjUyNkgzMjkuNTExQzMzMy4xODggMjY4LjUyNiAzMzYuNjA4IDI2OS42MzMgMzM5LjQ1MiAyNzEuNTMxVjI0NC43MzlDMzM5LjQ1MiAyMzkuMjY2IDMzNS4wMDEgMjM0LjgyOCAzMjkuNTExIDIzNC44MjhIOTAuOTQwNFpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgwLjg5MyAzMzUuMDAxIDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTlDODEgMzExLjY2NCA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2NCAzMzkuNDUyIDMwNi4xOVYyODYuMzY2WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTAuOTQwNCAxOTMuMjAxQzg1LjQ1MDUgMTkzLjIwMSA4MSAxOTcuNjM4IDgxIDIwMy4xMTJWMjI5LjkwM0M4My44NDMyIDIyOC4wMDYgODcuMjYyMiAyMjYuODk5IDkwLjk0MDQgMjI2Ljg5OUgzMjkuNTExQzMzMy4xODggMjI2Ljg5OSAzMzYuNjA4IDIyOC4wMDYgMzM5LjQ1MiAyMjkuOTAzVjIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNFpNMzM5LjQ1MiAyNDQuNzM5QzMzOS40NTIgMjM5LjI2NSAzMzUuMDAxIDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNDODEuMjE3NSAyNzEuMzg1IDgxLjQzODMgMjcxLjI0NSA4MS42NjI0IDI3MS4xMDlDODMuODMyNSAyNjkuNzk0IDg2LjMwNTQgMjY4LjkyNyA4OC45NTIzIDI2OC42MzVDODkuNjA1MSAyNjguNTYzIDkwLjI2ODQgMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMzAuMTgzIDI2OC41MjYgMzMwLjg0NiAyNjguNTYzIDMzMS40OTggMjY4LjYzNUMzMzQuNDE5IDI2OC45NTcgMzM3LjEyOCAyNjkuOTggMzM5LjQ1MiAyNzEuNTNWMjQ0LjczOVpNMzM5LjQ1MiAyODYuMzY2QzMzOS40NTIgMjgxLjAyMSAzMzUuMjA2IDI3Ni42NjMgMzI5Ljg5MyAyNzYuNDYyQzMyOS43NjcgMjc2LjQ1NyAzMjkuNjQgMjc2LjQ1NSAzMjkuNTExIDI3Ni40NTVIOTAuOTQwNEM4NS40NTA1IDI3Ni40NTUgODEgMjgwLjg5MyA4MSAyODYuMzY2VjMwNi4xODhDODEgMzExLjY2MiA4NS40NTA1IDMxNi4xMDEgOTAuOTQwNCAzMTYuMTAxSDMyOS41MTFDMzM1LjAwMSAzMTYuMTAxIDMzOS40NTIgMzExLjY2MiAzMzkuNDUyIDMwNi4xODhWMjg2LjM2NloiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNSIvPgo8cGF0aCBvcGFjaXR5PSIwLjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOTguMDE0NiAxMDRDODguNjE3NyAxMDQgODEgMTExLjU5NSA4MSAxMjAuOTY1VjE4OC4yNzZDODMuODQzMiAxODYuMzc5IDg3LjI2MjIgMTg1LjI3MiA5MC45NDA0IDE4NS4yNzJIMzI5LjUxMUMzMzMuMTg4IDE4NS4yNzIgMzM2LjYwOCAxODYuMzc5IDMzOS40NTIgMTg4LjI3NlYxMjAuOTY1QzMzOS40NTIgMTExLjU5NSAzMzEuODMzIDEwNCAzMjIuNDM3IDEwNEg5OC4wMTQ2Wk0zMzkuNDUyIDIwMy4xMTJDMzM5LjQ1MiAxOTcuNjM4IDMzNS4wMDEgMTkzLjIwMSAzMjkuNTExIDE5My4yMDFIOTAuOTQwNEM4NS40NTA1IDE5My4yMDEgODEgMTk3LjYzOCA4MSAyMDMuMTEyVjIyOS45MDNDODEuMjE3NSAyMjkuNzU4IDgxLjQzODMgMjI5LjYxOCA4MS42NjI0IDIyOS40ODJDODMuODMyNSAyMjguMTY3IDg2LjMwNTQgMjI3LjMgODguOTUyMyAyMjcuMDA4Qzg5LjYwNTEgMjI2LjkzNiA5MC4yNjg0IDIyNi44OTkgOTAuOTQwNCAyMjYuODk5SDMyOS41MTFDMzMwLjE4MyAyMjYuODk5IDMzMC44NDYgMjI2LjkzNiAzMzEuNDk4IDIyNy4wMDhDMzM0LjQxOSAyMjcuMzMgMzM3LjEyOCAyMjguMzUyIDMzOS40NTIgMjI5LjkwM1YyMDMuMTEyWk0zMzkuNDUyIDI0NC43MzlDMzM5LjQ1MiAyMzkuMzkzIDMzNS4yMDYgMjM1LjAzNiAzMjkuODkzIDIzNC44MzVDMzI5Ljc2NyAyMzQuODMgMzI5LjY0IDIzNC44MjggMzI5LjUxMSAyMzQuODI4SDkwLjk0MDRDODUuNDUwNSAyMzQuODI4IDgxIDIzOS4yNjUgODEgMjQ0LjczOVYyNzEuNTNMODEuMDcwNyAyNzEuNDgzQzgxLjI2NTMgMjcxLjM1NSA4MS40NjI1IDI3MS4yMyA4MS42NjI0IDI3MS4xMDlDODEuOTA4MyAyNzAuOTYgODIuMTU4MSAyNzAuODE3IDgyLjQxMTcgMjcwLjY3OUM4NC4zOTUzIDI2OS42MDUgODYuNjA1NCAyNjguODk0IDg4Ljk1MjMgMjY4LjYzNUM4OS4wMDUyIDI2OC42MjkgODkuMDU4IDI2OC42MjQgODkuMTExIDI2OC42MThDODkuNzEyNSAyNjguNTU3IDkwLjMyMjggMjY4LjUyNiA5MC45NDA0IDI2OC41MjZIMzI5LjUxMUMzMjkuNzM4IDI2OC41MjYgMzI5Ljk2NSAyNjguNTMgMzMwLjE5MiAyNjguNTM5QzMzMC42MzEgMjY4LjU1NSAzMzEuMDY3IDI2OC41ODcgMzMxLjQ5OCAyNjguNjM1QzMzNC40MTkgMjY4Ljk1NyAzMzcuMTI4IDI2OS45OCAzMzkuNDUyIDI3MS41M1YyNDQuNzM5Wk0zMzkuNDUyIDI4Ni4zNjZDMzM5LjQ1MiAyODEuMDIxIDMzNS4yMDYgMjc2LjY2MyAzMjkuODkzIDI3Ni40NjJMMzI5Ljg2NSAyNzYuNDYxQzMyOS43NDggMjc2LjQ1NyAzMjkuNjI5IDI3Ni40NTUgMzI5LjUxMSAyNzYuNDU1SDkwLjk0MDRDODUuNDUwNSAyNzYuNDU1IDgxIDI4MC44OTMgODEgMjg2LjM2NlYzMDYuMTg4QzgxIDMxMS42NjIgODUuNDUwNSAzMTYuMTAxIDkwLjk0MDQgMzE2LjEwMUgzMjkuNTExQzMzNS4wMDEgMzE2LjEwMSAzMzkuNDUyIDMxMS42NjIgMzM5LjQ1MiAzMDYuMTg4VjI4Ni4zNjZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjY5Ljg2OCAxMzEuNzUyQzI2OS44NjggMTI2LjI3OCAyNzQuMzE4IDEyMS44NCAyNzkuODA4IDEyMS44NEgzMTEuNjE4QzMxNy4xMDggMTIxLjg0IDMyMS41NTggMTI2LjI3OCAzMjEuNTU4IDEzMS43NTJWMTYxLjQ4NUMzMjEuNTU4IDE2Ni45NTkgMzE3LjEwOCAxNzEuMzk2IDMxMS42MTggMTcxLjM5NkgyNzkuODA4QzI3NC4zMTggMTcxLjM5NiAyNjkuODY4IDE2Ni45NTkgMjY5Ljg2OCAxNjEuNDg1VjEzMS43NTJaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzFfMTUiPgo8cmVjdCB3aWR0aD0iMjU5IiBoZWlnaHQ9IjIxMyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgxIDEwNCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",name:a="Porto",rdns:n="xyz.ithaca.porto"}="object"==typeof t?t:{};return eT.announceProvider({info:{icon:r,name:a,rdns:n,uuid:ed()},provider:e})}(y,c),()=>{r(),a(),n()});return Object.assign(y,{_internal:{destroy:h}})}function rB(e){return e.map(e=>{if("admin"===e.role)try{return eU.encode(rU.wallet_getAdmins.Key,{id:e.id??e.publicKey,publicKey:e.publicKey,type:e.type,..."webauthn-p256"===e.type?{credentialId:e.privateKey?.credential?.id,privateKey:{credential:{id:e.privateKey?.credential?.id},rpId:e.privateKey?.rpId}}:{}})}catch{return}}).filter(Boolean)}function rW(e,{address:t}){return e.map(e=>{if(e.chainId&&"session"===e.role&&!(e.expiry>0&&e.expiry<BigInt(Math.floor(Date.now()/1e3))))try{return eU.encode(rx,r_(e,{address:t}))}catch{return}}).filter(Boolean)}function rF(e){return(0,eq.getAddress)(e.address)}var rH=e.i(275123);function rV(e){return{...e,setup:e.setup??(()=>()=>{})}}async function rZ(e){let{account:t,calls:r,permissionsId:a}=e;if(void 0!==a){if(null===a)return;let e=t.keys?.find(e=>e.publicKey===a&&e.privateKey);if(!e)throw Error(`permission (id: ${a}) does not exist.`);return e}let n=t.keys?.find(e=>!(!e.privateKey||"session"!==e.role||e.expiry<BigInt(Math.floor(Date.now()/1e3)))&&!!r.every(t=>e.permissions?.calls?.some(e=>{if(e.to&&e.to!==t.to)return!1;if(e.signature){if(!t.data)return!1;let r=e_.slice(t.data,0,4);if(e_.validate(e.signature))return e.signature===r;if(t2.getSelector(e.signature)!==r)return!1}return!0}))),i=t.keys?.find(e=>"admin"===e.role&&e.privateKey);return n??i}e.s([],572972),e.i(572972);var rJ=e.i(409132);let rG=rT.Request;function rX(e){let{expiry:t,feeToken:r,permissions:a,publicKey:n,type:i}=e;return{expiry:t,feeToken:r??null,key:{publicKey:n,type:i},permissions:a??{}}}async function r0(e,t={}){if(!e)return;let r=t.chainId??e.chainId,a=e.expiry??0,n={chainId:r,expiry:a,feeToken:e.feeToken,permissions:tF(e,{feeTokens:t.feeTokens}),role:"session"};if(e?.key)return tx({...n,publicKey:e.key.publicKey,type:e.key.type??"secp256k1"});if("function"==typeof globalThis.crypto?.subtle?.generateKey)try{return await tC(n)}catch(e){if(!function(e){if(!(e instanceof Error))return!1;let t=e.message?.toLowerCase()??"";return"TypeError"===e.name||"ReferenceError"===e.name||t.includes("subtle")||t.includes("generatekey")}(e))throw e}return tO(n)}var r2=N;let r1=/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,r4=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,r5=/^localhost(:[0-9]{1,5})?$/,r3=/^[a-zA-Z0-9]{8,}$/,r6=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/,r9=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,r8=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function r7(e){if(/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(e)||/%[^0-9a-f]/i.test(e)||/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))return!1;let t=e.match(/(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/),r=t[1],a=t[2],n=t[3],i=t[4],s=t[5];if(!(r?.length&&n&&n.length>=0))return!1;if(a?.length){if(!(0===n.length||/^\//.test(n)))return!1}else if(/^\/\//.test(n))return!1;if(!/^[a-z][a-z0-9+\-.]*$/.test(r.toLowerCase()))return!1;let o="";return o+=`${r}:`,a?.length&&(o+=`//${a}`),o+=n,i?.length&&(o+=`?${i}`),s?.length&&(o+=`#${s}`),o}class ae extends r2.BaseError{constructor(e){const{field:t,metaMessages:r}=e;super(`Invalid Sign-In with Ethereum message field "${t}".`,{metaMessages:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Siwe.InvalidMessageFieldError"})}}async function at(e){let{address:t,authUrl:r,message:a,signature:n,publicKey:i}=e,{chainId:s}=function(e){let{scheme:t,statement:r,...a}=e.match(r9)?.groups??{},{chainId:n,expirationTime:i,issuedAt:s,notBefore:o,requestId:l,...c}=e.match(r8)?.groups??{},d=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...a,...c,...n?{chainId:Number(n)}:{},...i?{expirationTime:new Date(i)}:{},...s?{issuedAt:new Date(s)}:{},...o?{notBefore:new Date(o)}:{},...l?{requestId:l}:{},...d?{resources:d}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}(a);return await fetch(r.verify,{body:JSON.stringify({address:t,chainId:s,message:a,signature:n,walletAddress:t,...i&&{publicKey:i}}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"}).then(e=>e.json())}async function ar(e,t,r){let{chainId:a=e.chain?.id,domain:n,uri:i,resources:s,version:o="1"}=t,{address:l}=r,c=t.authUrl?aa(t.authUrl):void 0;if(!a)throw Error("`chainId` is required.");if(!n)throw Error("`domain` is required.");if(!t.nonce&&!c?.nonce)throw Error("`nonce` or `authUrl.nonce` is required.");if(!i)throw Error("`uri` is required.");let d=await (async()=>{if(t.nonce)return t.nonce;if(!c?.nonce)throw Error("`nonce` or `authUrl.nonce` is required.");let e=await fetch(c.nonce,{body:JSON.stringify({address:l,chainId:a,walletAddress:l}),headers:{"Content-Type":"application/json"},method:"POST"}),r=await e.json().catch(()=>void 0);if(!r?.nonce)throw Error("`nonce` or `authUrl.nonce` is required.");return r.nonce})();return function(e){let{chainId:t,domain:r,expirationTime:a,issuedAt:n=new Date,nonce:i,notBefore:s,requestId:o,resources:l,scheme:c,uri:d,version:u}=e;{if(t!==Math.floor(t))throw new ae({field:"chainId",metaMessages:["- Chain ID must be a EIP-155 chain ID.","- See https://eips.ethereum.org/EIPS/eip-155","",`Provided value: ${t}`]});if(!(r1.test(r)||r4.test(r)||r5.test(r)))throw new ae({field:"domain",metaMessages:["- Domain must be an RFC 3986 authority.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${r}`]});if(!r3.test(i))throw new ae({field:"nonce",metaMessages:["- Nonce must be at least 8 characters.","- Nonce must be alphanumeric.","",`Provided value: ${i}`]});if(!r7(d))throw new ae({field:"uri",metaMessages:["- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${d}`]});if("1"!==u)throw new ae({field:"version",metaMessages:["- Version must be '1'.","",`Provided value: ${u}`]});if(c&&!r6.test(c))throw new ae({field:"scheme",metaMessages:["- Scheme must be an RFC 3986 URI scheme.","- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1","",`Provided value: ${c}`]});let a=e.statement;if(a?.includes("\n"))throw new ae({field:"statement",metaMessages:["- Statement must not include '\\n'.","",`Provided value: ${a}`]})}let p=ex.from(e.address,{checksum:!0}),m=c?`${c}://${r}`:r,f=e.statement?`${e.statement}
`:"",y=`${m} wants you to sign in with your Ethereum account:
${p}

${f}`,h=`URI: ${d}
Version: ${u}
Chain ID: ${t}
Nonce: ${i}
Issued At: ${n.toISOString()}`;if(a&&(h+=`
Expiration Time: ${a.toISOString()}`),s&&(h+=`
Not Before: ${s.toISOString()}`),o&&(h+=`
Request ID: ${o}`),l){let e="\nResources:";for(let t of l){if(!r7(t))throw new ae({field:"resources",metaMessages:["- Every resource must be a RFC 3986 URI.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${t}`]});e+=`
- ${t}`}h+=e}return`${y}
${h}`}({...t,address:r.address,chainId:a,domain:n,nonce:d,resources:s,uri:i,version:o})}function aa(e,t=""){if(!e)return;let r=(()=>{if("string"==typeof e){let t=e.replace(/\/$/,"");return{logout:t+"/logout",nonce:t+"/nonce",verify:t+"/verify"}}return e})();return{logout:an(r.logout,t),nonce:an(r.nonce,t),verify:an(r.verify,t)}}function an(e,t){return t&&e.startsWith("/")?t+e:e}function ai(e){let t;return eB.keccak256((t=e_.from(e),e_.concat("0x19",e_.fromString("Ethereum Signed Message:\n"+e_.size(t)),t)))}e.i(909967);e.i(230612),e.i(650464),e.i(330973);var as=e.i(199666);async function ao(e,t){let{account:r=e.account}=t,a=r?tJ(r):void 0;if(!a)throw Error("account is required.");let{domain:{name:n,version:i}}=await (0,as.getEip712Domain)(e,{address:a.address});if(!e.chain)throw Error("client.chain is required");return{chainId:e.chain.id,name:n,verifyingContract:a.address,version:i}}async function al(e,t){let r=tG(eL.randomPrivateKey(),{keys:t.authorizeKeys});return await aM(e,{...t,account:r})}async function ac(e,t){let{account:r=e.account,chainIds:a}=t,n=r?tJ(r):void 0;if(!n)throw Error("account is required.");return Object.entries(await rc(e,{address:n.address,chainIds:a})).flatMap(([e,t])=>t.map(t=>tq(t,{chainId:Number(e)})))}async function ad(e,t){let{address:r,secret:a}=t;return await rf(e,{address:r,secret:a})}async function au(e,t){let{address:r}=t;return await ry(e,{address:r})}async function ap(e,t){let{account:r=e.account,calls:a,chain:n=e.chain,feePayer:i,merchantUrl:s,nonce:o,preCalls:l,requiredFunds:c,revokeKeys:d}=t,u=r?tJ(r):void 0,p=t.key??(u?tX(u,{role:"admin"}):void 0),m=t.authorizeKeys?.some(e=>"session"===e.role),{contracts:f,fees:{tokens:y}}=await ri(e,{chainId:n?.id}),h=m?f.orchestrator.address:void 0,w=(t.authorizeKeys??[]).map(e=>tW(e,{feeTokens:y,orchestrator:h})),g=t.feeToken?t.feeToken:p?.permissions?.spend?.[0]?.token,b="boolean"==typeof l&&l,M="object"==typeof l?l.map(({context:e,signature:t})=>({...e.preCall,signature:t})):void 0,v={address:u?.address,calls:a??[],capabilities:{authorizeKeys:w,meta:{feePayer:i,feeToken:g,nonce:o},preCall:b,preCalls:M,requiredFunds:c,revokeKeys:d?.map(e=>({hash:e.hash}))},chain:n,key:p?tW(p,{feeTokens:y}):void 0},I=await (async()=>{if(s){let t=(0,rD.createClient)({chain:e.chain,transport:(0,rO.http)(s)});return await ru(t,v).catch(t=>(console.error(t),ru(e,v)))}return await ru(e,v)})(),{capabilities:j,context:k,digest:A,signature:E,typedData:D}=I;if(s&&!await rI(e,{response:I._raw,signature:E}))throw Error(`cannot verify integrity of \`wallet_prepareCalls\` response from ${s}`);return{capabilities:{...j,quote:k.quote},context:k,digest:A,key:p,typedData:D}}async function am(e,t){let{address:r,authorizeKeys:a,chain:n=e.chain}=t;if(!n)throw Error("chain is required.");let{contracts:i,fees:{tokens:s}}=await ri(e,{chainId:n.id}),o=t.delegation??i.accountProxy.address,l=a.some(e=>"session"===e.role)?i.orchestrator.address:void 0,c=a.map(e=>{let t="session"===e.role?e.permissions:{};return tW({...e,permissions:t},{feeTokens:s,orchestrator:l})}),{capabilities:d,chainId:u,context:p,digests:m,typedData:f}=await rp(e,{address:r,authorizeKeys:c,chain:n,delegation:o}),y=tJ({address:r,keys:a});return{capabilities:d,chainId:u,context:{...p,account:y},digests:m,typedData:f}}async function af(e,t){let{phone:r,walletAddress:a}=t;return await rh(e,{phone:r,walletAddress:a})}async function ay(e,t){let{account:r=e.account,chain:a=e.chain,webAuthn:n}=t;if(!a)throw Error("`chain` is required.");let i=r?tJ(r):void 0;if(!i)throw Error("`account` is required.");let s=t.key??tX(i,t);if(!s&&!i.sign)throw Error("`key` or `account` with `sign` is required");let o=await Promise.all((t.preCalls??[]).map(async r=>{if(r.signature)return r;let{authorizeKeys:s,key:o,calls:l,revokeKeys:c}=r,{context:d,digest:u}=await ap(e,{account:i,authorizeKeys:s,calls:l,chain:a,feeToken:t.feeToken,key:o,preCalls:!0,revokeKeys:c});return{context:d,signature:await tB(o,{address:null,payload:u,webAuthn:n})}})),{capabilities:l,context:c,digest:d}=await ap(e,{...t,account:i,chain:a,key:s,preCalls:o}),u=await (async()=>s?await tB(s,{address:null,payload:d,webAuthn:n,wrap:!1}):await i.sign({hash:d}))();return await aw(e,{capabilities:l.feeSignature?{feeSignature:l.feeSignature}:void 0,context:c,key:s,signature:u})}async function ah(e,t){let r=!!e.context.preCall,{account:a,key:n}=t;if(a){let t=a.keys?.findIndex(t=>t.publicKey===e.key?.publicKey);if(-1===t)throw Error("key not found");return await t0(a,{key:t,payload:e.digest,replaySafe:!1,wrap:r})}if(n)return await tB(n,{address:null,payload:e.digest,wrap:r});throw Error("no key or account provided")}async function aw(e,t){let{capabilities:r,context:a,key:n,signature:i}=t;return await rm(e,{capabilities:r,context:a,key:n?tW(n):void 0,signature:i})}async function ag(e,t){let{email:r,walletAddress:a}=t;return await rw(e,{email:r,walletAddress:a})}async function ab(e,t){let{phone:r,walletAddress:a}=t;return await rg(e,{phone:r,walletAddress:a})}async function aM(e,t){if(t.account){let{account:r}=t,a=[...r.keys??[],...t.authorizeKeys??[]].filter((e,t,r)=>r.findIndex(t=>t.id===e.id)===t),{digests:n,...i}=await am(e,{...t,address:r.address,authorizeKeys:a}),s={auth:await r.sign({hash:n.auth}),exec:await r.sign({hash:n.exec})};return await aM(e,{...i,signatures:s})}let{context:r,signatures:a}=t,n=tJ(r.account);return await rb(e,{context:r,signatures:a}),n}async function av(e,t){let{chainId:r,email:a,signature:n,token:i,walletAddress:s}=t;return await rM(e,{chainId:r,email:a,signature:n,token:i,walletAddress:s})}async function aI(e,t){let{code:r,phone:a,walletAddress:n}=t;return await rv(e,{code:r,phone:a,walletAddress:n})}function aj(e){return{createAccount:t=>al(e,t),getCallsStatus:t=>rl(e,t),getCapabilities:()=>ri(e),getKeys:t=>ac(e,t),health:()=>rd(e),prepareCalls:t=>ap(e,t),prepareUpgradeAccount:t=>am(e,t),sendCalls:t=>ay(e,t),sendPreparedCalls:t=>aw(e,t),upgradeAccount:t=>aM(e,t),verifySignature:t=>rj(e,t)}}e.i(543191),e.i(969862),e.i(262479),N.BaseError,e.s(["createAccount",()=>al,"decorator",()=>aj,"getKeys",()=>ac,"getOnrampContactInfo",()=>ad,"onrampStatus",()=>au,"prepareCalls",()=>ap,"prepareUpgradeAccount",()=>am,"resendVerifyPhone",()=>af,"sendCalls",()=>ay,"sendPreparedCalls",()=>aw,"setEmail",()=>ag,"setPhone",()=>ab,"signCalls",()=>ah,"upgradeAccount",()=>aM,"verifyEmail",()=>av,"verifyPhone",()=>aI],18290);var ak=e.i(304441);async function aA(e,t){let{address:r}=t,{authorization:a,data:n,to:i}=await rn(e,{address:r});return ak.wrap({authorization:{...a,nonce:BigInt(a.nonce),r:BigInt(a.r),s:BigInt(a.s)},data:n,signature:t.signature,to:i})}function aE(e,t){let{tokens:r}=t,a=r.filter(e=>e.interop);return e.map(e=>{if(e.address)return e;let t=a.find(t=>t.symbol===e.symbol);if(!t)throw Error(`interop token not found: ${e.symbol}`);return{address:t.address,value:tr(e.value,t.decimals)}})}async function aD(e,t){let{chain:r=e.chain}=t??{};return await ri(e,{chainId:r?.id}).then(e=>e.fees.tokens)}async function aN(e,t){let{addressOrSymbol:r}=t;return(await aD(e,t)).find(aN.predicate(r))}async function aO(e,t){let{chain:r=e.chain,store:a}=t??{},n=a?.getState()??{},i=t?.addressOrSymbol??n.feeToken,s=await aD(e,{chain:r}).then(e=>e.filter(e=>e.feeToken));return s?.find(e=>!!i&&(!!("native"===i&&e.address===tg.zeroAddress||ex.validate(i)&&ex.isEqual(e.address,i))||i===e.symbol))}function az(e={}){let t,r,{mock:a,multichain:n=!0,webAuthn:i}=e,s=(()=>{if("self"!==e.keystoreHost&&("undefined"==typeof window||window.location?.hostname!=="localhost"))return e.keystoreHost})();return rV({actions:{async addFunds(){throw new W},async createAccount(e){let{admins:r,email:n,label:o,permissions:l,internal:c,signInWithEthereum:d}=e,{client:u}=c,p=tG(eL.randomPrivateKey()),m=await aD(u),f=a?tS():await tP({createFn:i?.createFn,label:o||`${p.address.slice(0,8)}\u2026${p.address.slice(-6)}`,rpId:s,userId:eY.from(p.address)}),y=await r0(l,{chainId:u.chain.id,feeTokens:m}),h=r?.map(e=>tx(e)),w=await aM(u,{account:p,authorizeKeys:[f,...h??[],...y?[y]:[]]});t=p.address,n&&o&&await ag(u,{email:o,walletAddress:w.address});let g=await (async()=>{if(!d)return;let e=await ar(u,d,{address:w.address}),t=await t0(p,{payload:ai(e_.fromString(e))});return{message:e,signature:await aA(u,{address:w.address,signature:t})}})();return{account:{...w,signInWithEthereum:g}}},async getAccountVersion(e){let{address:t,internal:r}=e,{client:a}=r,{contracts:n}=await ri(a),{accountImplementation:i}=n,s=await ao(a,{account:tJ(i)}).then(e=>e.version),o=await ao(a,{account:t}).then(e=>e.version).catch(()=>s);if(!o||!s)throw Error("version not found.");return{current:o,latest:s}},async getAssets(e){let{account:t,chainFilter:r,assetFilter:a,assetTypeFilter:n,internal:i}=e,{client:s}=i;return await rs(s,{account:t,assetFilter:a,assetTypeFilter:n,chainFilter:r})},async getCallsStatus(e){let{id:t,internal:r}=e,{client:a}=r,n=await rl(a,{id:t});return{atomic:!0,chainId:e_.fromNumber(a.chain.id),id:t,receipts:n.receipts?.map(e=>({blockHash:e.blockHash,blockNumber:e_.fromNumber(e.blockNumber),gasUsed:e_.fromNumber(e.gasUsed),logs:e.logs,status:e.status,transactionHash:e.transactionHash})),status:n.status,version:"1.0"}},async getCapabilities(e){let{chainIds:t,internal:r}=e,{client:a}=r,i={atomic:{status:"supported"},atomicBatch:{supported:!0},feeToken:{supported:!0,tokens:[]},merchant:{supported:!0},permissions:{supported:!0},requiredFunds:{supported:!!n,tokens:[]}};return Object.entries(await ri(a,{chainIds:t?t.map(e=>e_.toNumber(e)):"all",raw:!0})).reduce((e,[t,r])=>({...e,[t]:{...i,...r,feeToken:{supported:!0,tokens:r.fees.tokens},requiredFunds:{supported:!!n,tokens:n?r.fees.tokens.filter(e=>e.interop):[]}}}),{})},async getKeys(e){let{account:t,chainIds:r,internal:a}=e,{client:n}=a;return ec([...await ac(n,{account:t,chainIds:r}),...t.keys??[]],e=>e.publicKey)},async grantAdmin(e){let{account:t,internal:r}=e,{client:a}=r,n=tx(e.key,{chainId:a.chain.id}),s=await aO(a,{addressOrSymbol:e.feeToken,store:r.store}),{id:o}=await ay(a,{account:t,authorizeKeys:[n],feeToken:s?.address,webAuthn:i});return await (0,rJ.waitForCallsStatus)(a,{id:o,pollingInterval:500}),{key:n}},async grantPermissions(e){let{account:t,internal:r,permissions:a}=e,{client:n}=r,i=await aD(n),s=await r0(a,{chainId:n.chain.id,feeTokens:i});if(!s)throw Error("key to authorize not found.");let o=t.keys?.find(e=>"admin"===e.role&&e.privateKey);if(!o)throw Error("admin key not found.");let{context:l,digest:c}=await ap(n,{account:t,authorizeKeys:[s],key:o,preCalls:!0}),d=await tB(o,{address:null,payload:c});return await aw(n,{context:l,key:o,signature:d}),{key:s}},async loadAccounts(e){let{internal:r,permissions:n,signInWithEthereum:o}=e,{client:l}=r,c=await aD(l),d=await r0(n,{chainId:l.chain.id,feeTokens:c}),{digest:u,digestType:p,message:m}=await (async()=>{if(o&&e.address){let t=await ar(l,o,{address:e.address});return{context:void 0,digest:ai(e_.fromString(t)),digestType:"siwe",message:t}}return{context:void 0,digest:"0x",message:void 0}})(),{address:f,credentialId:y,webAuthnSignature:h}=await (async()=>{if(a){if(!t)throw Error("address_internal not found.");return{address:t,credentialId:void 0}}if(e.address&&e.key)return{address:e.address,credentialId:e.key.credentialId};let r=await tm({challenge:u,getFn:i?.getFn,rpId:s}),n=r.raw.response;return{address:eY.toHex(new Uint8Array(n.userHandle)),credentialId:r.raw.id,webAuthnSignature:r}})(),w=await ac(l,{account:f,chainIds:[l.chain.id]}),g=tJ({address:f,keys:[...w,...d?[d]:[]].map((e,t)=>0===t&&"webauthn-p256"===e.type?tU({...e,credential:{id:y,publicKey:e9.fromHex(e.publicKey)},id:f,rpId:s}):e)}),b=tX(g,{role:"admin"}),M=await (async()=>{if("0x"!==u)return h?tZ(tV(h),{keyType:"webauthn-p256",publicKey:b.publicKey}):await tB(b,{address:g.address,payload:u})})();if(d){let{context:e,digest:t}=await ap(l,{account:g,authorizeKeys:[d],preCalls:!0}),r=await tB(b,{address:null,payload:t});await aw(l,{context:e,key:b,signature:r})}let v=await (async()=>{if(o){if("siwe"===p&&m&&M)return{message:m,signature:await aA(l,{address:g.address,signature:M})};{let e=await ar(l,o,{address:g.address}),t=await t0(g,{payload:ai(e_.fromString(e)),role:"admin"});return{message:e,signature:await aA(l,{address:g.address,signature:t})}}}})();return{accounts:[{...g,signInWithEthereum:v}]}},async prepareCalls(e){let{account:t,calls:r,internal:a,merchantUrl:i}=e,{client:s}=a,o=e.key??await rZ({account:t,calls:r});if(!o)throw Error("cannot find authorized key to sign with.");let[l,c]=await Promise.all([aD(s),aO(s,{addressOrSymbol:e.feeToken,store:a.store})]),d=aE(e.requiredFunds??[],{tokens:l}),{capabilities:u,context:p,digest:m,typedData:f}=await ap(s,{account:t,calls:r,feeToken:c?.address,key:o,merchantUrl:i,requiredFunds:n?d:void 0}),y=p.quote?.quotes??[],h=y[y.length-1];return{account:t,capabilities:{...u,quote:p.quote},chainId:s.chain.id,context:{...p,account:t,calls:r,nonce:h?.intent.nonce},digest:m,key:o,typedData:f}},async prepareUpgradeAccount(e){let{address:t,email:n,label:o,internal:l,permissions:c}=e,{client:d}=l,[u,p]=await Promise.all([aD(d),aO(d,{store:l.store})]),m=a?tS():await tP({createFn:i?.createFn,label:o||`${t.slice(0,8)}\u2026${t.slice(-6)}`,rpId:s,userId:eY.from(t)}),f=await r0(c,{chainId:d.chain.id,feeTokens:u}),{context:y,digests:h}=await am(d,{address:t,authorizeKeys:[m,...f?[f]:[]],feeToken:p?.address});return n&&(r=o),{context:y,digests:h}},async revokeAdmin(e){let{account:t,id:r,internal:a}=e,{client:n}=a,s=t.keys?.find(e=>e.id===r);if(s){if("webauthn-p256"===s.type&&t.keys?.filter(e=>"webauthn-p256"===e.type).length===1)throw Error("revoke the only WebAuthn key left.");try{let r=await aO(n,{addressOrSymbol:e.feeToken,store:a.store}),{id:o}=await ay(n,{account:t,feeToken:r?.address,revokeKeys:[s],webAuthn:i});await (0,rJ.waitForCallsStatus)(n,{id:o})}catch(e){if("Rpc.ExecutionError"===e.name&&e.abiError?.name==="KeyDoesNotExist")return;throw e}}},async revokePermissions(e){let{account:t,id:r,internal:a}=e,{client:n}=a,s=t.keys?.find(e=>e.id===r);if(s){if("admin"===s.role)throw Error("cannot revoke admins.");try{let r=await aO(n,{addressOrSymbol:e.feeToken,store:a.store}),{id:o}=await ay(n,{account:t,feeToken:r?.address,revokeKeys:[s],webAuthn:i});await (0,rJ.waitForCallsStatus)(n,{id:o})}catch(e){if("Rpc.ExecutionError"===e.name&&e.abiError?.name==="KeyDoesNotExist")return;throw e}}},async sendCalls(e){let{account:t,asTxHash:r,calls:a,chainId:s,internal:o,merchantUrl:l}=e,{client:c}=o,d=await rZ({account:t,calls:a,permissionsId:e.permissionsId}),[u,p]=await Promise.all([aD(c),aO(c,{addressOrSymbol:e.feeToken,store:o.store})]),m=aE(e.requiredFunds??[],{tokens:u}),f=await ay(c,{account:t,calls:a,feeToken:p?.address,key:d,merchantUrl:l,requiredFunds:n?m:void 0,webAuthn:i,...s?{chain:{id:s}}:{}});if(r){let{id:e,receipts:t,status:r}=await (0,rJ.waitForCallsStatus)(c,{id:f.id,pollingInterval:500});if(!t?.[0]){if("success"===r)throw new X({message:"Call bundle with id: "+e+" not found."});throw new T({message:"Transaction failed under call bundle id: "+e+"."})}return{id:t[0].transactionHash}}return f},async sendPreparedCalls(e){let{context:t,key:r,internal:a,signature:n}=e,{client:i}=a,{id:s}=await aw(i,{context:t,key:r,signature:n});return s},async signPersonalMessage(e){let{account:t,data:r,internal:a}=e,{client:n}=a,s=t.keys?.find(e=>"admin"===e.role&&e.privateKey);if(!s)throw Error("cannot find admin key to sign with.");let o=await t0(t,{key:s,payload:ai(r),webAuthn:i});return aA(n,{address:t.address,signature:o})},async signTypedData(e){let{account:t,internal:r}=e,{client:a}=r,n=t.keys?.find(e=>"admin"===e.role&&e.privateKey);if(!n)throw Error("cannot find admin key to sign with.");let s=E.parse(e.data),o=s.domain?.name==="Orchestrator",l=await t0(t,{key:n,payload:eH(s),replaySafe:!o,webAuthn:i});return o?l:aA(a,{address:t.address,signature:l})},async upgradeAccount(e){let{account:t,context:a,internal:n,signatures:i}=e,{client:s}=n;return await aM(s,{context:a,signatures:i}),r&&await ag(s,{email:r,walletAddress:t.address}),{account:t}},async verifyEmail(e){let{account:t,chainId:r,email:a,token:n,internal:s,walletAddress:o}=e,{client:l}=s,c=t.keys?.find(e=>"admin"===e.role&&e.privateKey);if(!c)throw Error("cannot find admin key to sign with.");let d=await t0(t,{key:c,payload:eB.keccak256(e_.fromString(`${a}${n}`)),webAuthn:i});return await av(l,{chainId:r,email:a,signature:d,token:n,walletAddress:o})}},config:e,name:"rpc"})}function aP(e={}){let{fallback:t=az(),host:r=eb.prod,renderer:a=ev(),theme:n,themeController:i}=e,s=new Set,o=function(e={}){let t=e.id??0;return{prepare:e=>({...{id:t++,...e},jsonrpc:"2.0"}),get id(){return t}}}();function l(e){return ea({async request(t){let r=o.prepare(t);return e.setState(e=>{let t=e.accounts[0],a=t?.keys?.find(e=>"admin"===e.role&&"webauthn-p256"===e.type);return{...e,requestQueue:[...e.requestQueue,{account:t?{address:t.address,key:a?{credentialId:a?.credentialId,publicKey:a.publicKey}:void 0}:void 0,request:r,status:"pending"}]}}),new Promise((t,a)=>{let n=i=>{let o=i.find(e=>e.request.id===r.id);if(!o&&0===i.length){s.delete(n),a(new Q);return}o&&("success"===o.status||"error"===o.status)&&(s.delete(n),"success"===o.status?t(o.result):a(en(o.error)),e.setState(e=>({...e,requestQueue:e.requestQueue.filter(e=>e.request.id!==r.id)})))};s.add(n)})}},{schema:null})}return rV({actions:{async addFunds(e){let{internal:t}=e,{request:r,store:a}=t;if("wallet_addFunds"!==r.method)throw Error("Cannot add funds for method: "+r.method);let n=l(a);return await n.request(r)},async createAccount(e){let{internal:t}=e,{client:r,config:a,request:n,store:i}=t,{storage:s}=a,o=l(i);return{account:await (async()=>{if("wallet_connect"===n.method){let[{capabilities:e,chainIds:t}]=n._decoded.params??[{}],i=aC(e?.signInWithEthereum?.authUrl??a.authUrl,{storage:s}),l=n.params?.[0]?.capabilities?.signInWithEthereum,c=await r0(e?.grantPermissions,{chainId:r.chain.id}),d=c?eU.encode(rG,rX(c)):void 0,{accounts:u}=await o.request({...n,params:[{capabilities:{...n.params?.[0]?.capabilities,grantPermissions:d,signInWithEthereum:i||l?{...l,authUrl:i}:void 0},chainIds:t?.map(e=>e_.fromNumber(e))}]}),[p]=u;if(!p)throw Error("no account found.");let m=p.capabilities?.admins?.map(e=>tx(e,{chainId:r.chain.id})).filter(Boolean),f=p.capabilities?.permissions?.map(e=>{try{let t=rq(eU.decode(rx,e));if(t.id===c?.id)return{...t,...c,permissions:t.permissions};return t}catch{return}}).filter(Boolean),y=await (async()=>{if(!p.capabilities?.signInWithEthereum)return;let{message:e,signature:t}=p.capabilities.signInWithEthereum;if(!i)return{message:e,signature:t};let{token:r}=await at({address:p.address,authUrl:i,message:e,publicKey:p.capabilities?.admins?.[0]?.publicKey,signature:t});return{message:e,signature:t,token:r}})();return{...tJ({address:p.address,keys:[...m??[],...f??[]]}),signInWithEthereum:y}}throw Error(`Account creation not supported on method: ${n.method}`)})()}},async disconnect(e){let{internal:t}=e,{config:r}=t,{storage:a}=r,n=await a.getItem("porto.authUrl")||void 0,i=aC(r.authUrl??n,{storage:a});i&&await fetch(i.logout,{credentials:"include",method:"POST"}).catch(()=>{})},async getAccountVersion(e){let{internal:r}=e,{store:n,request:i}=r;if("wallet_getAccountVersion"!==i.method)throw Error("Cannot get version for method: "+i.method);if(!a.supportsHeadless)return t.actions.getAccountVersion(e);let s=l(n);return await s.request(i)},async getAssets(e){let{internal:r}=e,{store:n,request:i}=r;if("wallet_getAssets"!==i.method)throw Error("Cannot get assets for method: "+i.method);if(!a.supportsHeadless)return t.actions.getAssets(e);let s=l(n),o=await s.request(i);return eU.decode(rU.wallet_getAssets.Response,o)},async getCallsStatus(e){let{internal:r}=e,{store:n,request:i}=r;if("wallet_getCallsStatus"!==i.method)throw Error("Cannot get status for method: "+i.method);if(!a.supportsHeadless)return t.actions.getCallsStatus(e);let s=l(n);return await s.request(i)},async getCapabilities(e){let{internal:r}=e,{store:n,request:i}=r;if("wallet_getCapabilities"!==i.method)throw Error("Cannot get capabilities for method: "+i.method);if(!a.supportsHeadless)return t.actions.getCapabilities(e);let s=l(n);return await s.request(i)},async getKeys(e){let{account:r,chainIds:n,internal:i}=e,{store:s}=i,o=await (async()=>{if(!a.supportsHeadless)return t.actions.getKeys(e);let i=l(s),o=await i.request({method:"wallet_getKeys",params:[eU.encode(rU.wallet_getKeys.Parameters,{address:r.address,chainIds:n})]});return eU.decode(rU.wallet_getKeys.Response,o)})();return ec([...o,...r.keys??[]],e=>e.publicKey)},async grantAdmin(e){let{internal:t}=e,{request:r,store:a}=t;if("wallet_grantAdmin"!==r.method)throw Error("Cannot authorize admin for method: "+r.method);let[n]=r._decoded.params,i=tx(n.key);if(!i)throw Error("no key found.");let s=await aS(t,e),o=l(a);return await o.request({method:"wallet_grantAdmin",params:[{...r.params?.[0],capabilities:{...r.params?.[0]?.capabilities,feeToken:s}}]}),{key:i}},async grantPermissions(e){let{internal:t}=e,{client:r,request:a,store:n}=t;if("wallet_grantPermissions"!==a.method)throw Error("Cannot grant permissions for method: "+a.method);let[{address:i,...s}]=a._decoded.params,o=await r0(s,{chainId:r.chain.id});if(!o)throw Error("no key found.");let c=eU.encode(rG,rX(o)),d=l(n);return await d.request({method:"wallet_grantPermissions",params:[c]}),{key:o}},async loadAccounts(e){let{internal:t}=e,{client:r,config:a,store:n}=t,{storage:i}=a,s=l(n),o=t.request;if("wallet_connect"!==o.method&&"eth_requestAccounts"!==o.method)throw Error("Cannot load accounts for method: "+o.method);return{accounts:await (async()=>{let[e]=o._decoded.params??[],{capabilities:t}=e??{},n=aC(t?.signInWithEthereum?.authUrl??a.authUrl,{storage:i}),l=o.params?.[0]?.capabilities?.signInWithEthereum,c=await r0(t?.grantPermissions,{chainId:r.chain.id}),d=c?eU.encode(rG,rX(c)):void 0,{accounts:u}=await s.request({method:"wallet_connect",params:[{...o.params?.[0],capabilities:{...o.params?.[0]?.capabilities,grantPermissions:d,signInWithEthereum:n||l?{...l,authUrl:n}:void 0}}]});return Promise.all(u.map(async e=>{let t=e.capabilities?.admins?.map(e=>tx(e)).filter(Boolean),r=e.capabilities?.permissions?.map(e=>{try{let t=rq(eU.decode(rx,e));if(t.id===c?.id)return{...t,...c,permissions:t.permissions};return t}catch{return}}).filter(Boolean),a=await (async()=>{if(!e.capabilities?.signInWithEthereum)return;let{message:t,signature:r}=e.capabilities.signInWithEthereum;if(!n)return{message:t,signature:r};let{token:a}=await at({address:e.address,authUrl:n,message:t,publicKey:e.capabilities?.admins?.[0]?.publicKey,signature:r});return{message:t,signature:r,token:a}})();return{...tJ({address:e.address,keys:[...t??[],...r??[]]}),signInWithEthereum:a}}))})()}},async prepareCalls(e){let{account:r,internal:n}=e,{store:i,request:s}=n;if("wallet_prepareCalls"!==s.method)throw Error("Cannot prepare calls for method: "+s.method);if(!a.supportsHeadless)return t.actions.prepareCalls(e);let o=await aS(n,e),c=l(i),d=eU.decode(rU.wallet_prepareCalls.Response,await c.request({...s,params:[{...s.params?.[0],capabilities:{...s.params?.[0]?.capabilities,feeToken:o}}]}));return{account:r,chainId:Number(d.chainId),context:d.context,digest:d.digest,key:d.key,typedData:d.typedData}},async prepareUpgradeAccount(e){let{internal:r}=e,{client:n,store:i,request:s}=r;if("wallet_prepareUpgradeAccount"!==s.method)throw Error("Cannot prepare upgrade for method: "+s.method);if(!a.supportsHeadless)return t.actions.prepareUpgradeAccount(e);let[{capabilities:o}]=s._decoded.params??[{}],c=await r0(o?.grantPermissions,{chainId:n.chain.id}),d=c?eU.encode(rG,rX(c)):void 0,u=l(i),{context:p,digests:m}=await u.request({...s,params:[{...s.params?.[0],capabilities:{...s.params?.[0]?.capabilities,grantPermissions:d}}]}),f=p.account.keys?.map(e=>e.id===c?.id?{...e,...c}:e);return{context:{...p,account:{...p.account,keys:f}},digests:m}},async revokeAdmin(e){let{account:t,id:r,internal:a}=e,{store:n,request:i}=a;if("wallet_revokeAdmin"!==i.method)throw Error("Cannot revoke admin for method: "+i.method);let s=t.keys?.find(e=>e.id===r);if(!s)return;if("webauthn-p256"===s.type&&t.keys?.filter(e=>"webauthn-p256"===e.type).length===1)throw Error("revoke the only WebAuthn key left.");let o=await aS(a,e),c=l(n);return await c.request({...i,params:[{...i.params?.[0],capabilities:{...i.params?.[0]?.capabilities,feeToken:o}}]})},async revokePermissions(e){let{account:t,id:r,internal:a}=e,{store:n,request:i}=a;if("wallet_revokePermissions"!==i.method)throw Error("Cannot revoke permissions for method: "+i.method);let s=t.keys?.find(e=>e.id===r);if(!s)return;if("admin"===s.role)throw Error("cannot revoke permissions.");let o=l(n);return await o.request(i)},async sendCalls(e){let{account:r,asTxHash:n,calls:i,chainId:s,internal:o,merchantUrl:c,requiredFunds:d}=e,{client:u,store:p,request:m}=o,f=l(p),y=await aS(o,e),h=await rZ({account:r,calls:i,permissionsId:e.permissionsId});if(h&&"session"===h.role){if(!a.supportsHeadless)return t.actions.sendCalls(e);try{let e=await f.request(eU.encode(rU.wallet_prepareCalls.Request,{method:"wallet_prepareCalls",params:[{calls:i,capabilities:{..."wallet_sendCalls"===m._decoded.method?m._decoded.params?.[0]?.capabilities:void 0,feeToken:y,merchantUrl:c,requiredFunds:d},chainId:s,from:r.address,key:h}]})),t=e.capabilities?.quote?.quotes??[];if(t.some((e,r)=>(r!==t.length-1||!(t.length>1))&&e_.toBigInt(e.feeTokenDeficit)>0n))throw Error("insufficient funds");let a=await tB(h,{address:null,payload:e.digest,wrap:!1}),o=(await f.request({method:"wallet_sendPreparedCalls",params:[{...e,signature:a}]}))[0];if(!o)throw Error("id not found");if(n){let{id:e,receipts:t,status:r}=await (0,rJ.waitForCallsStatus)(u,{id:o.id,pollingInterval:500});if(!t?.[0]){if("success"===r)throw new X({message:"Call bundle with id: "+e+" not found."});throw new T({message:"Transaction failed under call bundle id: "+e+"."})}return{id:t[0].transactionHash}}return o}catch{}}if("eth_sendTransaction"===m.method)return{id:await f.request({...m,params:[{...m.params?.[0],capabilities:{feeToken:y,merchantUrl:c},...s?{chainId:e_.fromNumber(s)}:{}}]})};if("wallet_sendCalls"===m.method)return await f.request({method:"wallet_sendCalls",params:[{...m.params?.[0],capabilities:{...m.params?.[0]?.capabilities,feeToken:y,merchantUrl:c},...s?{chainId:e_.fromNumber(s)}:{}}]});throw Error("Cannot execute for method: "+m.method)},async sendPreparedCalls(e){let{internal:r}=e,{store:n,request:i}=r;if("wallet_sendPreparedCalls"!==i.method)throw Error("Cannot send prepared calls for method: "+i.method);if(!a.supportsHeadless)return t.actions.sendPreparedCalls(e);let s=l(n),o=await s.request(i),c=o[0]?.id;if(!c)throw Error("id not found");return c},async signPersonalMessage(e){let{internal:t}=e,{store:r,request:a}=t;if("personal_sign"!==a.method)throw Error("Cannot sign personal message for method: "+a.method);let n=l(r);return await n.request(a)},async signTypedData(e){let{internal:t}=e,{store:r,request:a}=t;if("eth_signTypedData_v4"!==a.method)throw Error("Cannot sign typed data for method: "+a.method);let n=l(r);return await n.request(a)},async switchChain(e){let{internal:t}=e,{store:r,request:n}=t;if("wallet_switchEthereumChain"!==n.method)throw Error("Cannot switch chain for method: "+n.method);if(!a.supportsHeadless)return;let i=l(r);return await i.request(n)},async upgradeAccount(e){let{account:t,internal:r}=e,{store:a,request:n}=r;if("wallet_upgradeAccount"!==n.method)throw Error("Cannot upgrade account for method: "+n.method);let i=l(a);return await i.request(n),{account:t}},async verifyEmail(e){let{internal:t}=e,{request:r,store:a}=t;if("account_verifyEmail"!==r.method)throw Error("Cannot verify email for method: "+r.method);let n=l(a);return await n.request(r)}},config:e,name:"dialog",setup(e){let{internal:t}=e,{store:o}=t,l=a.setup({host:r,internal:t,theme:n,themeController:i}),c=o.subscribe(e=>e.requestQueue,e=>{for(let t of s)t(e);let t=e.map(e=>"pending"===e.status?e:void 0).filter(Boolean);l.syncRequests(t).catch(()=>{}),0===t.length&&l.close()});return()=>{c(),l.destroy()}}})}async function aS(e,t){let{config:{feeToken:r}}=e,{feeToken:a}=t??{};return a??r}function aC(e,{storage:t}){if(!e)return;let r=aa(e,"undefined"!=typeof window?window.location.origin:void 0);return r&&t.setItem("porto.authUrl",r),r}function aT(e={}){if(!eg())return e.fallback??rV({actions:az().actions,name:"relay"});let{redirectUri:t,requestOptions:r,...a}=e;return rV({...aP({...a,renderer:ej({redirectUri:t,requestOptions:r})}),name:"reactNative"})}(aN||(aN={})).predicate=function(e){return t=>!!e&&(ex.validate(e)?ex.isEqual(t.address,e):"native"===e?t.address===tg.zeroAddress:e===t.symbol)},e.s([],657289);var ax=e.i(657289);e.s(["_internal_types",0,ax,"dialog",()=>aP,"from",()=>rV,"reactNative",()=>aT,"relay",()=>az],642595);var a_=e.i(642595),aq=e.i(125340),aR=e.i(86268),aU=e.i(146532);function aL(e){return e}function aK(...e){return{async getItem(t){let r=(await Promise.allSettled(e.map(e=>e.getItem(t)))).find(e=>"fulfilled"===e.status&&null!==e.value);return r?.status!=="fulfilled"||null===r.value?null:r.value},async removeItem(t){await Promise.allSettled(e.map(e=>e.removeItem(t)))},async setItem(t,r){await Promise.allSettled(e.map(e=>e.setItem(t,r)))},sizeLimit:Math.min(...e.map(e=>e.sizeLimit)),storages:e}}function a$(){let e="undefined"!=typeof indexedDB?(0,aU.createStore)("porto","store"):void 0;return{async getItem(t){let r=await (0,aU.get)(t,e);return null===r?null:r},async removeItem(t){await (0,aU.del)(t,e)},async setItem(t,r){await (0,aU.set)(t,el(r),e)},sizeLimit:0x3200000}}function aY(){return{async getItem(e){let t=window.localStorage.getItem(e);if(null===t)return null;try{return E.parse(t)}catch{return null}},async removeItem(e){window.localStorage.removeItem(e)},async setItem(e,t){window.localStorage.setItem(e,E.stringify(t))},sizeLimit:5242880}}function aQ(){return{async getItem(e){let t=document.cookie.split("; ").find(t=>t.startsWith(`${e}=`));if(!t)return null;try{return E.parse(t.substring(e.length+1))}catch{return null}},async removeItem(e){document.cookie=`${e}=;max-age=-1;path=/`},async setItem(e,t){document.cookie=`${e}=${E.stringify(t)};path=/;samesite=None;secure;max-age=31536000`},sizeLimit:4096}}function aB(){let e=new Map;return{getItem:t=>e.get(t)??null,removeItem(t){e.delete(t)},setItem(t,r){e.set(t,r)},sizeLimit:1/0}}e.s(["combine",()=>aK,"cookie",()=>aQ,"from",()=>aL,"idb",()=>a$,"localStorage",()=>aY,"memory",()=>aB],443048);let aW="undefined"!=typeof window&&"undefined"!=typeof document,aF={announceProvider:!0,chains:v,mode:aW?aP({host:eb.prod}):az(),relay:(0,rO.http)(rP.prod.http),storage:aW&&"undefined"!=typeof indexedDB?a$():aB(),storageKey:"porto.store"};function aH(e={}){let t=e.chains??aF.chains,r=Object.fromEntries(t.map(t=>[t.id,e.transports?.[t.id]??(0,rO.http)()])),a={announceProvider:e.announceProvider??aF.announceProvider,authUrl:e.authUrl,chains:t,feeToken:e.feeToken,merchantUrl:e.merchantUrl,mode:e.mode??aF.mode,relay:e.relay??aF.relay,storage:e.storage??aF.storage,storageKey:e.storageKey??aF.storageKey,transports:r},n=(0,aR.createStore)((0,aq.devtools)((0,aq.subscribeWithSelector)((0,aq.persist)(e=>({accounts:[],chainIds:a.chains.map(e=>e.id),feeToken:a.feeToken,requestQueue:[]}),{merge(e,t){let r=a.chains.find(t=>t.id===e.chainIds[0])?.id??a.chains[0].id,n=[r,...a.chains.map(e=>e.id).filter(e=>e!==r)];return{...t,...e,chainIds:n}},name:a.storageKey,partialize:e=>({accounts:e.accounts.map(e=>el(e)),chainIds:e.chainIds}),storage:a.storage,version:5})))),i=a.mode,s={config:a,getMode:()=>i,id:ed(),setMode:e=>(l?.(),i=e,l=e.setup({internal:s})),store:n},o=rQ(s),l=null!==i?i.setup({internal:s}):()=>{};return{_internal:s,config:a,destroy(){l(),o._internal.destroy()},provider:o}}e.s(["create",()=>aH,"defaultConfig",0,aF],57605);var aV=e.i(57605),aZ=e.i(736515),aJ=e.i(443048);e.i(893845);var aG=e.i(415677);e.s(["fallback",()=>rN.fallback,"http",()=>rO.http,"relayProxy",()=>rS,"relayUrls",0,rP,"webSocket",()=>aG.webSocket],429171);var aX=e.i(429171),a0=e.i(225470),a2=e.i(376475);e.i(18290),e.s(["addFaucetFunds",()=>ro,"createAccount",()=>al,"decorator",()=>aj,"getAssets",()=>rs,"getAuthorization",()=>rn,"getCallsStatus",()=>rl,"getCapabilities",()=>ri,"getKeys",()=>ac,"getOnrampContactInfo",()=>ad,"health",()=>rd,"onrampStatus",()=>au,"prepareCalls",()=>ap,"prepareUpgradeAccount",()=>am,"resendVerifyPhone",()=>af,"sendCalls",()=>ay,"sendPreparedCalls",()=>aw,"setEmail",()=>ag,"setPhone",()=>ab,"signCalls",()=>ah,"upgradeAccount",()=>aM,"verifyEmail",()=>av,"verifyPhone",()=>aI,"verifySignature",()=>rj],942635);var a1=e.i(942635);e.s(["Account",0,a0,"Chains",0,A,"Dialog",0,eC,"Key",0,a2,"Messenger",0,rH,"Mode",0,a_,"Porto",0,aV,"RelayActions",0,a1,"RpcSchema",0,aZ,"Storage",0,aJ,"Transport",0,aX,"from",()=>rQ],14502)}]);